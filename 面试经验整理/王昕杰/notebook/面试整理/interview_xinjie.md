# é¢è¯•é—®ç­”æ•´ç†

## cv ç®—æ³•
### æ‰‹å†™IoU
```python
import numpy as np
def iou_calculate(bbox1, bbox2):
    """
    Args:
      bbox1: (N, 4) (xmin, ymin, xmax, ymax)
      bbox2: (M, 4) np.array
    Returns:
      iou: (N,M)
    """
    area1 = (bbox1[..., 2] - bbox1[..., 0]) * (bbox1[..., 3] - bbox1[..., 1]) # (N,)
    area2 = (bbox2[..., 2] - bbox2[..., 0]) * (bbox2[..., 3] - bbox2[..., 1]) # (M,)
    lt = np.maximum(bbox1[:, None, :2], bbox2[:, :2]) # (N, M, 2)
    rb = np.minimum(bbox1[:, None, 2:], bbox2[:, 2:]) # (N, M, 2)
    inter = np.maximum(0, rb - lt) # (N, M, 2)
    inter_area = inter[..., 0] * inter[..., 1] # (N, M)
    union_area = area1[:, None] + area2 - inter_area # (N, M)
    iou = inter_area / union_area
    return iou
```

### æ‰‹å†™NMS
```python
def nms(bboxes, iou_thresh):
    """
    Args:
      bboxes: after score. np.array. (N, 6) [xmin, ymin, xmax, ymax, score, class]
      iou_thresh: float
    Returns:
      bboxes_nms: np.array. (N', 6) [xmin, ymin, xmax, ymax, score, class]
    """
    classes = bboxes[:, 5] # (N,)
    unique_classes = set(classes)
    bboxes_nms = []
    for cls in unique_classes:
        mask = classes == cls # (N,)
        cls_bboxes = bboxes[mask] # (M, 6)
        # nms in each class
        x1, y1 = cls_bboxes[:, 0], cls_bboxes[:, 1] # (M,)
        x2, y2 = cls_bboxes[:, 2], cls_bboxes[:, 3]
        scores = cls_bboxes[:, 4] # (M,)
        areas = (x2 - x1) * (y2 - y1) # (M,)
        order = scores.argsort()[::-1] # (M,)
        keep = []
        while order.size > 0:
            i = order[0]
            keep.append(i)
            x1_max = np.maximum(x1[i], x1[order[1:]]) # (1,), (M-1,) -> (M-1,)
            y1_max = np.maximum(y1[i], y1[order[1:]])
            x2_min = np.minimum(x2[i], x2[order[1:]])
            y2_min = np.minimum(y2[i], y2[order[1:]])
            w = np.maximum(0, x2_min - x1_max) # (M-1,)
            h = np.maximum(0, y2_min - y1_max)
            inter_area = w * h # (M-1,)
            union_area = areas[i] + areas[order[1:]] - inter_area # (1,), (M-1,) -> (M-1,)
            iou = inter_area / union_area # (M-1,)
            keep_index = np.where(iou <= iou_thresh)[0]
            order = order[keep_index + 1]
        keep_bboxes = cls_bboxes[keep]
        bboxes_nms.append(keep_bboxes)
    bboxes_nms = np.vstack(bboxes_nms)
    return bboxes_nms
```

### focal loss
```python
p = torch.sigmoid(predicts)
ce_loss = torch.nn.functional.binary_cross_entropy_with_logits(predicts, targets, reduction="none")
p_t = p * targets + (1 - p) * (1 - targets)
loss = ce_loss * ((1 - p_t) ** gamma)
if alpha >= 0:
    alpha_t = alpha * targets + (1 - alpha) * (1 - targets)
    loss = alpha_t * loss
loss = loss.sum()
loss = loss / max(1, num_matched_based_anchors)
return loss
```

### Opencv åŒçº¿æ€§æ’å€¼
å‚è€ƒ:
https://geek-docs.com/opencv/opencv-examples/bilinear-interpolation.html
åŒçº¿æ€§æ’å€¼æ˜¯opencv resize é»˜è®¤æ–¹æ³•,æŠ˜ä¸­æ¥è¯´å…·æœ‰è¾ƒå¥½é€Ÿåº¦ä¸å›¾åƒè´¨é‡.
1. ç”Ÿæˆå…¨é»‘çš„æ”¾å¤§å›¾åƒçš„çŸ©é˜µ
2. æŸ¥æ‰¾æ”¾å¤§å›¾åƒæ¯ä¸ªç‚¹å¯¹åº”çš„åŸå›¾åƒåæ ‡. è®¾æ”¾å¤§åå›¾åƒx', y', æ¨ªçºµæ”¾å¤§ç‡å‡ä¸ºa, åŸå›¾åƒåæ ‡ä¸º x'/a, y'/a
3. å¯»æ‰¾åŸå›¾åƒå‘¨å›´4é¢†åŸŸåƒç´ ç‚¹, (x,y), (x+1,y), (x,y+1), (x+1,y+1)
4. æ±‚4ä¸ªç‚¹åˆ°x'/a, y'/aè·ç¦», dx = x'/a - x, dy = y'/a - y
5. åˆ™æ”¾å¤§å›¾åƒåƒç´ å€¼ä¸º
$$ I'(x',y') = (1-dx)(1-dy)I(x,y) + dx(1-dy)I(x+1,y) + (1-dx)dyI(x,y+1) + dxdyI(x+1,y+1) $$

```python
import cv2
import numpy as np

def bl_interpolate(img, ax=1., ay=1.):
    H, W, C = img.shape
    aH = int(ay * H)
    aW = int(ax * W)
    # get position of resized image
    y = np.tile(np.arange(aH), (aW, 1)).transpose()
    x = np.tile(np.arange(aW), (aH, 1))
    # get position of original position
    y = (y / ay)
    x = (x / ax)
    ix = np.floor(x).astype(np.int)
    iy = np.floor(y).astype(np.int)
    ix = np.minimum(ix, W-2)
    iy = np.minimum(iy, H-2)
    # get distance
    dx = x - ix
    dy = y - iy
    dx = np.repeat(np.expand_dims(dx, axis=-1), 3, axis=-1)
    dy = np.repeat(np.expand_dims(dy, axis=-1), 3, axis=-1)
    # interpolation
    out = (1-dx) * (1-dy) * img[iy, ix] + dx * (1 - dy) * img[iy, ix+1] + \
          (1 - dx) * dy * img[iy+1, ix] + dx * dy * img[iy+1, ix+1]
    out = np.clip(out, 0, 255)
    out = out.astype(np.uint8)

    return out

img = cv2.imread("filepath").astype(np.float)
out = bl_interpolate(img, ax=1.5, ay=1.5)
cv2.imshow("result", out)
cv2.waitKey(0)
```

### ä¸­å€¼æ»¤æ³¢
```python
def medianBlur(img_3c, kernel, padding_way='ZERO'):
    # kernel size need 3, 5, 7, 9....
    paddingSize = kernel // 2
    height, width, channel = img_3c.shape

    # å‡è®¾è¾“å…¥,å¦‚ä¸‹çŸ©é˜µ,5x5
    # [[2 6 3 4 7]
    #  [6 1 7 1 5]
    #  [4 6 7 3 3]
    #  [3 1 8 8 6]
    #  [2 4 8 0 7]]

    # åˆ›å»ºç”¨äºè¾“å‡ºçš„çŸ©é˜µ
    matOut = np.zeros((height, width, 3), dtype=img_3c.dtype)
    for c in range(channel):
        img = img_3c[:, :, c]
        matBase = np.zeros((height + paddingSize * 2, width + paddingSize * 2), dtype=img.dtype)

        # åˆ›å»ºä¸€ä¸ªæ·»åŠ äº†paddingçš„çŸ©é˜µ,åˆå§‹å€¼ä¸º0
        # å¦‚æœkernelçš„å¤§å°ä¸º3,æ‰€ä»¥ä»5x5å˜æˆäº†7x7
        # [[0 0 0 0 0 0 0]
        #  [0 0 0 0 0 0 0]
        #  [0 0 0 0 0 0 0]
        #  [0 0 0 0 0 0 0]
        #  [0 0 0 0 0 0 0]
        #  [0 0 0 0 0 0 0]
        #  [0 0 0 0 0 0 0]]

        matBase[paddingSize:-paddingSize, paddingSize:-paddingSize] = img
        # å°†åŸå€¼å†™å…¥æ–°åˆ›å»ºçš„çŸ©é˜µå½“ä¸­
        #[[0 0 0 0 0 0 0]
        # [0 2 6 3 4 7 0]
        # [0 6 1 7 1 5 0]
        # [0 4 6 7 3 3 0]
        # [0 3 1 8 8 6 0]
        # [0 2 4 8 0 7 0]
        # [0 0 0 0 0 0 0]]

        if padding_way is 'ZERO':
            pass
        elif padding_way is 'REPLICA':
            for i in range(paddingSize):
                matBase[i, paddingSize:-paddingSize] = img[0, :]
                matBase[-(1 + i), paddingSize:-paddingSize] = img[-1, :]
                matBase[paddingSize:-paddingSize, i] = img[:, 0]
                matBase[paddingSize:-paddingSize, -(1 + i)] = img[:, -1]
                # é€šè¿‡REPLICAåçš„çŸ©é˜µ,è®²å››ä¸ªè¾¹è¡¥é½
                #[[0 2 6 3 4 7 0]
                # [2 2 6 3 4 7 7]
                # [6 6 1 7 1 5 5]
                # [4 4 6 7 3 3 3]
                # [3 3 1 8 8 6 6]
                # [2 2 4 8 0 7 7]
                # [0 2 4 8 0 7 0]]

        # è¿™é‡Œæ˜¯éå†çŸ©é˜µçš„æ¯ä¸ªç‚¹
        for x in range(height):
            for y in range(width):
                # è·å–kernel X kernel çš„å†…å®¹,å¹¶è½¬åŒ–æˆé˜Ÿå¹¶åˆ—
                line = matBase[x:x + kernel, y:y + kernel].flatten()
                # é˜Ÿåˆ—æ’åºå¤„ç†.
                line = np.sort(line)
                # å–ä¸­é—´å€¼èµ‹å€¼
                matOut[x, y, c] = line[(kernel * kernel) // 2]
    return matOut
```

### kmeans
ç®—æ³•æµç¨‹:
1. éšæœºç”Ÿæˆkä¸ªè´¨å¿ƒ
while æ”¶æ•›æˆ–è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°:
    2. åˆ†åˆ«è®¡ç®—æ¯ä¸€ä¸ªæ ·æœ¬ä¸kä¸ªè´¨å¿ƒçš„è·ç¦»
    3. æ¯ä¸ªæ ·æœ¬å½’ç±»åˆ°è·ç¦»æœ€è¿‘è´¨å¿ƒ
    4. åŸºäºå½’ç±»æ ·æœ¬æ›´æ–°è´¨å¿ƒåæ ‡

ç¼ºç‚¹:
è´¨å¿ƒçš„åˆå§‹ä½ç½®å’Œæ•°æ®çš„åˆ†å¸ƒå¾ˆå¤§ç¨‹åº¦å½±å“äº†ç®—æ³•çš„ç²¾å‡†åº¦å’Œæ”¶æ•›æ—¶é—´ã€‚æ›´ä¸¥é‡çš„æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè´¨å¿ƒä¼šè¢«ä¸€å°ç°‡æ•°æ®â€œæ¬ºéª—â€ï¼Œä»è€Œé™·å…¥åˆ°å±€éƒ¨æœ€ä¼˜è§£ï¼Œæ— æ³•è¾¾åˆ°å…¨å±€æœ€ä¼˜ã€‚

yolov3 kmeans
```python
def kmeans(self, X, k, dist=np.median):
    """X: (n, 4) bboxes"""
    n = len(X)
    prev_cls = np.zeros((n,))
    # init k centers. replace=False no repeat element
    centers = X[np.random.choice(n, k, replace=False)] # (k, 4)
    while True:
        # distances = np.sqrt(np.sum((X[:,None,:]-centers[:,None,:])**2, axis=-1)) # (n, k)
        distances = 1 - self.iou(X, centers) # (n, k)
        curr_cls = np.argmin(distances, axis=1) # (n,)
        # centers won't change
        if (prev_cls == curr_cls).all():
            break
        # update centers coordinates
        for i in range(k):
            centers[i] = dist(X[curr_cls == i], axis=0)
        prev_cls = curr_cls

    return centers
```
#### knn python å®ç°
```python
def classify_two(inX, dataSet, labels, k):
    m, n = dataSet.shape   # shapeï¼ˆm, nï¼‰måˆ—nä¸ªç‰¹å¾
    # è®¡ç®—æµ‹è¯•æ•°æ®åˆ°æ¯ä¸ªç‚¹çš„æ¬§å¼è·ç¦»
    distances = []
    for i in range(m):
        dist_sum = 0
        for j in range(n):
            dist_sum += (inX[j] - dataSet[i][j]) ** 2
        distances.append(dist_sum ** 0.5)

    sortDist = sorted(distances)

    # k ä¸ªæœ€è¿‘çš„å€¼æ‰€å±çš„ç±»åˆ«
    classCount = {}
    for i in range(k):
        voteLabel = labels[ distances.index(sortDist[i])]
        classCount[voteLabel] = classCount.get(voteLabel, 0) + 1
    sortedClass = sorted(classCount.items(), key=lambda d:d[1], reverse=True)
    return sortedClass[0][0]
```

### meanÂ shiftÂ èšç±»æµç¨‹ï¼š
mean shiftå°±æ˜¯æ²¿ç€å¯†åº¦ä¸Šå‡çš„æ–¹å‘å¯»æ‰¾åŒå±ä¸€ä¸ªç°‡çš„æ•°æ®ç‚¹ã€‚å›¾åƒåˆ†å‰²ã€å›¾åƒè·Ÿè¸ªï¼Œéœ€è¦åŠ å…¥æ ¸å‡½æ•°ã€‚
1. åœ¨æœªè¢«æ ‡è®°çš„æ•°æ®ç‚¹ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªç‚¹ä½œä¸ºä¸­å¿ƒcenterï¼›
2. æ‰¾å‡ºç¦»centerè·ç¦»åœ¨bandwidthä¹‹å†…çš„æ‰€æœ‰ç‚¹ï¼Œè®°åšé›†åˆMï¼Œè®¤ä¸ºè¿™äº›ç‚¹å±äºç°‡cã€‚åŒæ—¶ï¼ŒæŠŠè¿™äº›æ±‚å†…ç‚¹å±äºè¿™ä¸ªç±»çš„æ¦‚ç‡åŠ 1ï¼Œè¿™ä¸ªå‚æ•°å°†ç”¨äºæœ€åæ­¥éª¤çš„åˆ†ç±»
3. ä»¥centerä¸ºä¸­å¿ƒç‚¹ï¼Œè®¡ç®—ä»centerå¼€å§‹åˆ°é›†åˆMä¸­æ¯ä¸ªå…ƒç´ çš„å‘é‡ï¼Œå°†è¿™äº›å‘é‡ç›¸åŠ ï¼Œå¾—åˆ°å‘é‡shiftã€‚
4. centerÂ =Â center+shiftã€‚å³centeræ²¿ç€shiftçš„æ–¹å‘ç§»åŠ¨ï¼Œç§»åŠ¨è·ç¦»æ˜¯||shift||ã€‚
5. é‡å¤æ­¥éª¤2ã€3ã€4ï¼Œç›´åˆ°shiftçš„å¤§å°å¾ˆå°ï¼ˆå°±æ˜¯è¿­ä»£åˆ°æ”¶æ•›ï¼‰ï¼Œè®°ä½æ­¤æ—¶çš„centerã€‚æ³¨æ„ï¼Œè¿™ä¸ªè¿­ä»£è¿‡ç¨‹ä¸­é‡åˆ°çš„ç‚¹éƒ½åº”è¯¥å½’ç±»åˆ°ç°‡cã€‚
6. å¦‚æœæ”¶æ•›æ—¶å½“å‰ç°‡cçš„centerä¸å…¶å®ƒå·²ç»å­˜åœ¨çš„ç°‡c2ä¸­å¿ƒçš„è·ç¦»å°äºé˜ˆå€¼ï¼Œé‚£ä¹ˆæŠŠc2å’Œcåˆå¹¶ã€‚å¦åˆ™ï¼ŒæŠŠcä½œä¸ºæ–°çš„èšç±»ï¼Œå¢åŠ 1ç±»ã€‚
6. é‡å¤1ã€2ã€3ã€4ã€5ç›´åˆ°æ‰€æœ‰çš„ç‚¹éƒ½è¢«æ ‡è®°è®¿é—®ã€‚
7. åˆ†ç±»ï¼šæ ¹æ®æ¯ä¸ªç±»ï¼Œå¯¹æ¯ä¸ªç‚¹çš„è®¿é—®é¢‘ç‡ï¼Œå–è®¿é—®é¢‘ç‡æœ€å¤§çš„é‚£ä¸ªç±»ï¼Œä½œä¸ºå½“å‰ç‚¹é›†çš„æ‰€å±ç±»ã€‚
https://github.com/zziz/mean-shift

### æœºå™¨å­¦ä¹ çŸ¥è¯†ç‚¹
#### æ¬ æ‹Ÿåˆ,è¿‡æ‹Ÿåˆ
- æ¬ æ‹Ÿåˆ: é«˜åå·®, ä½æ–¹å·®. å¢åŠ æ¨¡å‹å¤æ‚åº¦, å¢åŠ è®­ç»ƒæ—¶é•¿
- è¿‡æ‹Ÿåˆ: ä½åå·®, é«˜æ–¹å·®. æ•°æ®å¢å¼º, æå‰ç»“æŸè®­ç»ƒ, æ­£åˆ™åŒ–
#### SGD, Adam åŒºåˆ«
SGDä¸ºéšæœºæ¢¯åº¦ä¸‹é™,æ¯ä¸€æ¬¡è¿­ä»£è®¡ç®—æ•°æ®é›†çš„mini-batchçš„æ¢¯åº¦,ç„¶åå¯¹å‚æ•°è¿›è¡Œæ›´æ–°ã€‚
Momentumå‚è€ƒäº†åŠ¨é‡çš„æ¦‚å¿µ,å‰å‡ æ¬¡çš„æ¢¯åº¦ä¹Ÿä¼šå‚ä¸åˆ°å½“å‰çš„è®¡ç®—ä¸­,ä½†æ˜¯å‰å‡ è½®çš„æ¢¯åº¦å åŠ åœ¨å½“å‰è®¡ç®—ä¸­ä¼šæœ‰ä¸€å®šçš„è¡°å‡ã€‚
Adagardåœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­å¯ä»¥è‡ªåŠ¨å˜æ›´å­¦ä¹ çš„é€Ÿç‡,è®¾ç½®ä¸€ä¸ªå…¨å±€çš„å­¦ä¹ ç‡,è€Œå®é™…çš„å­¦ä¹ ç‡ä¸ä»¥å¾€çš„å‚æ•°æ¨¡å’Œçš„å¼€æ–¹æˆåæ¯”ã€‚
Adamåˆ©ç”¨æ¢¯åº¦çš„ä¸€é˜¶çŸ©ä¼°è®¡å’ŒäºŒé˜¶çŸ©ä¼°è®¡åŠ¨æ€è°ƒæ•´æ¯ä¸ªå‚æ•°çš„å­¦ä¹ ç‡,ä½¿å¾—å‚æ•°æ›´æ–°è¾ƒä¸ºå¹³ç¨³ã€‚

SGD: W = W - lr * grad
Adam:
![20200622_233509_51](assets/20200622_233509_51.png)
å‰ä¸¤è¡Œå¯¹æ¢¯åº¦å’Œæ¢¯åº¦çš„å¹³æ–¹è¿›è¡Œæ»‘åŠ¨å¹³å‡
ä¸­é—´ä¸¤è¡Œå¯¹åˆæœŸæ»‘åŠ¨å¹³å‡åå·®çš„ä¿®æ­£ï¼Œå½“tè¶Šæ¥è¶Šå¤§æ—¶ï¼Œåˆ†æ¯éƒ½è¶‹è¿‘äº 1
æœ€åä¸€è¡Œæ˜¯å‚æ•°æ›´æ–°å…¬å¼. æ¯ä¸ªå‚æ•°çš„æ¢¯åº¦éƒ½æ˜¯ä¸åŒçš„ï¼Œæ¯ä¸ªå‚æ•°çš„å­¦ä¹ ç‡å³ä½¿åœ¨åŒä¸€è½®ä¹Ÿä¸ä¸€æ ·.
<!--
$$ m_t = \beta_1 m_{t-1} + (1 - \beta_1) g_t $$
$$ v_t = \beta_2 v_{t-1} + (1 - \beta_2) g_t^2 $$
$$ \hat{m_t} = \frac{m_t}{1 - \beta_1^t} $$
$$ \hat{v_t} = \frac{v_t}{1 - \beta_2^t} $$
$$ W_{t+1} = W_t - \frac{lr}{\sqrt{\hat{v_t}}+\varepsilon }\hat{m_t} $$
-->
å‚è€ƒ: https://www.cnblogs.com/wuliytTaotao/p/11101652.html

#### å‘é‡ä¸çŸ©é˜µçš„æ¬§å‡ é‡Œå¾—è·ç¦»è®¡ç®—
å‚è€ƒ: https://blog.csdn.net/Autism_/article/details/88360483
å‘é‡ä¸å‘é‡çš„æ¬§å¼è·ç¦»
![20200529_194237_81](assets/20200529_194237_81.png)
çŸ©é˜µä¸çŸ©é˜µçš„æ¬§å¼è·ç¦»
![20200529_194800_64](assets/20200529_194800_64.png)
$$ C=sum(A^2,axis=1)âˆ—ones((1,3))+ones((2,1))âˆ—sum(B^2,axis=1)^T âˆ’ 2AB^T $$

####  çŸ©é˜µæ­£å®šæ€§çš„åˆ¤æ–­,HessiançŸ©é˜µæ­£å®šæ€§åœ¨æ¢¯åº¦ä¸‹é™ä¸­çš„åº”ç”¨
è‹¥çŸ©é˜µæ‰€æœ‰ç‰¹å¾å€¼å‡ä¸å°äº0,åˆ™åˆ¤å®šä¸ºåŠæ­£å®šã€‚è‹¥çŸ©é˜µæ‰€æœ‰ç‰¹å¾å€¼å‡å¤§äº0,åˆ™åˆ¤å®šä¸ºæ­£å®šã€‚åœ¨åˆ¤æ–­ä¼˜åŒ–ç®—æ³•çš„å¯è¡Œæ€§æ—¶HessiançŸ©é˜µçš„æ­£å®šæ€§èµ·åˆ°äº†å¾ˆå¤§çš„ä½œç”¨,è‹¥Hessianæ­£å®š,åˆ™å‡½æ•°çš„äºŒé˜¶åå¯¼æ’å¤§äº0,å‡½æ•°çš„å˜åŒ–ç‡å¤„äºé€’å¢çŠ¶æ€,åœ¨ç‰›é¡¿æ³•ç­‰æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•ä¸­,HessiançŸ©é˜µçš„æ­£å®šæ€§å¯ä»¥å¾ˆå®¹æ˜“çš„åˆ¤æ–­å‡½æ•°æ˜¯å¦å¯æ”¶æ•›åˆ°å±€éƒ¨æˆ–å…¨å±€æœ€ä¼˜è§£ã€‚

#### ä¸åŒçš„æŸå¤±å‡½æ•°
https://zhuanlan.zhihu.com/p/77686118
MSE, MAE, SMOOTH L1, CE, Hinge Loss


#### ç‰¹å¾å·¥ç¨‹
https://www.zhihu.com/question/29316149

#### æ¦‚ç‡ ä¼¼ç„¶ åŒºåˆ«
ä¼¼ç„¶:åŸºäºç‰¹å®šè§‚æµ‹å€¼ï¼Œæ¨æµ‹æ¨¡å‹å‚æ•°æ˜¯å¦åˆç†ã€‚
æ¦‚ç‡:åŸºäºç»™å®šæ¨¡å‹å‚æ•°ï¼Œæ¨æµ‹ç»“æœçš„åˆç†æ€§ï¼Œä¸æ¶‰åŠä»»ä½•è§‚å¯Ÿåˆ°çš„æ•°æ®ã€‚
æœ€å¤§ä¼¼ç„¶ä¼°è®¡: æ‰¾åˆ°å‚æ•°thetaçš„ä¸€ä¸ªä¼°è®¡å€¼,ä½¿å¾—å½“å‰æ ·æœ¬å‡ºç°çš„å¯èƒ½æ€§æœ€å¤§ã€‚

#### è´å¶æ–¯
å¯¹äºå¤§å¤šæ•°çš„åˆ†ç±»ç®—æ³•ï¼Œæ¯”å¦‚å†³ç­–æ ‘,KNN,é€»è¾‘å›å½’ï¼Œæ”¯æŒå‘é‡æœºç­‰ï¼Œä»–ä»¬éƒ½æ˜¯åˆ¤åˆ«æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥å­¦ä¹ å‡ºç‰¹å¾è¾“å‡ºYå’Œç‰¹å¾Xä¹‹é—´çš„å…³ç³»ï¼Œè¦ä¹ˆæ˜¯å†³ç­–å‡½æ•°ğ‘Œ=f(ğ‘‹),è¦ä¹ˆæ˜¯æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒğ‘ƒ(ğ‘Œ|ğ‘‹)ã€‚
æœ´ç´ è´å¶æ–¯æ˜¯ç”Ÿæˆæ–¹æ³•ï¼Œæ‰¾å‡ºè¾“å‡ºYå’Œç‰¹å¾Xçš„è”åˆåˆ†å¸ƒğ‘ƒ(ğ‘‹,ğ‘Œ), ç„¶åç”¨ ğ‘ƒ(ğ‘Œ|ğ‘‹)=ğ‘ƒ(ğ‘‹,ğ‘Œ)/ğ‘ƒ(ğ‘‹) å¾—å‡ºæ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ ğ‘ƒ(ğ‘Œ|ğ‘‹). å…·ä½“è¯´ä¸‹, è”åˆæ¦‚ç‡åˆ†å¸ƒP(X,Y)ç”±P(X|Y)ä¹˜P(Y)å¾—åˆ°. æœ´ç´ :æŒ‡å‡è®¾å„ä¸ªç‰¹å¾é—´ç›¸äº’ç‹¬ç«‹. æœ´ç´ è´å¶æ–¯å¯ä»¥ç”¨æå¤§ä¼¼ç„¶ä¼°è®¡å’Œè´å¶æ–¯ä¼°è®¡æ±‚è§£, è´å¶æ–¯ä¼°è®¡åœ¨æå¤§ä¼¼ç„¶ä¼°è®¡çš„åŸºç¡€ä¸Šå¼•å…¥äº†å…ˆéªŒåˆ†å¸ƒ(æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘,åœ¨è®¡ç®—æ¡ä»¶æ¦‚ç‡çš„æ—¶å€™å¼•å…¥lambda).
![20200717_103024_42](assets/20200717_103024_42.png)

æœ´ç´ è´å¶æ–¯æ³•åˆ†ç±»æ—¶, å¯¹ç»™å®šçš„è¾“å…¥ x. é€šè¿‡å­¦ä¹ åˆ°çš„æ¨¡å‹è®¡ç®—åéªŒæ¦‚ç‡åˆ†å¸ƒ P(Y=c|X=x), å°†åéªŒæ¦‚ç‡æœ€å¤§çš„ç±»ä½œä¸º x çš„ç±»è¾“å‡º. æ ¹æ®æœŸæœ›é£é™©æœ€å°åŒ–å‡†åˆ™å°±å¾—åˆ°åéªŒæ¦‚ç‡æœ€å¤§åŒ–å‡†åˆ™.

ç”Ÿæˆæ–¹æ³•çš„ç‰¹ç‚¹: ç”Ÿæˆæ–¹æ³•å¯ä»¥è¿˜åŸå‡ºè”åˆæ¦‚ç‡åˆ†å¸ƒ P(X,Y), è€Œå¦‚åˆ¤åˆ«æ–¹æ³•
åˆ™ä¸èƒ½. ç”Ÿæˆæ–¹æ³•çš„å­¦ä¹ æ”¶æ•›é€Ÿåº¦æ›´å¿«, å½“å­˜åœ¨éšå˜é‡æ—¶, ä»å¯ä»¥ç”¨ç”Ÿæˆæ–¹æ³•å­¦ä¹ , æ­¤æ—¶åˆ¤åˆ«æ–¹æ³•å°±ä¸èƒ½ç”¨
åˆ¤åˆ«æ–¹æ³•çš„ç‰¹ç‚¹: åˆ¤åˆ«æ–¹æ³•ç›´æ¥å­¦ä¹ çš„æ˜¯æ¡ä»¶æ¦‚ç‡ P(Y|X)æˆ–å†³ç­–å‡½æ•°
f(X), ç›´æ¥é¢å¯¹é¢„æµ‹, å¾€å¾€å­¦ä¹ çš„å‡†ç¡®ç‡æ›´é«˜. ç”±äºç›´æ¥å­¦ä¹  P(Y|X) æˆ– f(X), å¯ä»¥å¯¹æ•°æ®è¿›è¡Œå„ç§ç¨‹åº¦ä¸Šçš„æŠ½è±¡ã€å®šä¹‰ç‰¹å¾å¹¶ä½¿ç”¨ç‰¹å¾, å› æ­¤å¯ä»¥ç®€åŒ–å­¦ä¹ é—®é¢˜ã€‚

å‚è€ƒ: http://www.ruanyifeng.com/blog/2013/12/naive_bayes_classifier.html
https://www.cnblogs.com/pinard/p/6069267.html

#### PCAç®—æ³•
å‚è€ƒ https://www.cnblogs.com/pinard/p/6239403.html
PCAçš„ä¼˜åŒ–ç›®æ ‡ï¼Œå°±æ˜¯æœ€å¤§åŒ–æŠ•å½±æ–¹å·®ã€‚æ¢ç§è¯´æ³•å°±æ˜¯ï¼Œè®©æ•°æ®åœ¨æŸä¸ªè¶…å¹³é¢ï¼ˆä¸»è½´ï¼‰ä¸ŠæŠ•å½±çš„æ–¹å·®æœ€å¤§ã€‚

XæŠ•å½±åçš„æ–¹å·®å°±æ˜¯åæ–¹å·®çŸ©é˜µçš„ç‰¹å¾å€¼ã€‚è¦æ‰¾åˆ°æœ€å¤§çš„æ–¹å·®ï¼Œç›¸å½“äºæ±‚åæ–¹å·®çŸ©é˜µçš„æœ€å¤§ç‰¹å¾å€¼ï¼Œè€Œæœ€ä½³æŠ•å½±æ–¹å‘å°±æ˜¯æœ€å¤§ç‰¹å¾å€¼æ‰€å¯¹åº”çš„ç‰¹å¾å‘é‡ã€‚
è¾“å…¥ï¼šnç»´æ ·æœ¬é›†ğ·=(ğ‘¥(1),ğ‘¥(2),...,ğ‘¥(ğ‘š))ï¼Œè¦é™ç»´åˆ°çš„ç»´æ•°n'.
è¾“å‡ºï¼šé™ç»´åçš„æ ·æœ¬é›†ğ·â€²
1. å¯¹æ‰€æœ‰çš„æ ·æœ¬è¿›è¡Œä¸­å¿ƒåŒ–ï¼š$ x(i)=x(i)âˆ’1/m \sum_{j=1}^m x^j$
2. è®¡ç®—æ ·æœ¬çš„åæ–¹å·®çŸ©é˜µ$ğ‘‹ğ‘‹^ğ‘‡$
3. å¯¹çŸ©é˜µ$ğ‘‹ğ‘‹^ğ‘‡$è¿›è¡Œç‰¹å¾å€¼åˆ†è§£
4. å–å‡ºæœ€å¤§çš„kä¸ªç‰¹å¾å€¼å¯¹åº”çš„ç‰¹å¾å‘é‡(ğ‘¤1,ğ‘¤2,...,ğ‘¤k), å°†æ‰€æœ‰çš„ç‰¹å¾å‘é‡æ ‡å‡†åŒ–åï¼Œç»„æˆç‰¹å¾å‘é‡çŸ©é˜µW
5. å¯¹æ ·æœ¬é›†ä¸­çš„æ¯ä¸€ä¸ªæ ·æœ¬ğ‘¥(ğ‘–),è½¬åŒ–ä¸ºæ–°çš„æ ·æœ¬ $ğ‘§(ğ‘–)=ğ‘Š^ğ‘‡ğ‘¥(ğ‘–)$
6. å¾—åˆ°è¾“å‡ºæ ·æœ¬é›†ğ·â€²=(ğ‘§(1),ğ‘§(2),...,ğ‘§(ğ‘š))

åœ¨ä¸Šé¢çš„PCAç®—æ³•ä¸­ï¼Œæˆ‘ä»¬å‡è®¾å­˜åœ¨ä¸€ä¸ªçº¿æ€§çš„è¶…å¹³é¢ï¼Œå¯ä»¥è®©æˆ‘ä»¬å¯¹æ•°æ®è¿›è¡ŒæŠ•å½±ã€‚ä½†æ˜¯æœ‰äº›æ—¶å€™ï¼Œæ•°æ®ä¸æ˜¯çº¿æ€§çš„ï¼Œä¸èƒ½ç›´æ¥è¿›è¡ŒPCAé™ç»´ã€‚è¿™é‡Œå°±éœ€è¦ç”¨åˆ°å’Œæ”¯æŒå‘é‡æœºä¸€æ ·çš„æ ¸å‡½æ•°çš„æ€æƒ³ï¼Œå…ˆæŠŠæ•°æ®é›†ä»nç»´æ˜ å°„åˆ°çº¿æ€§å¯åˆ†çš„é«˜ç»´N>n,ç„¶åå†ä»Nç»´é™ç»´åˆ°ä¸€ä¸ªä½ç»´åº¦n', è¿™é‡Œçš„ç»´åº¦ä¹‹é—´æ»¡è¶³$n'<n<N$ã€‚

ä½¿ç”¨äº†æ ¸å‡½æ•°çš„ä¸»æˆåˆ†åˆ†æä¸€èˆ¬ç§°ä¹‹ä¸ºæ ¸ä¸»æˆåˆ†åˆ†æ(Kernelized PCA)
é€šè¿‡åœ¨é«˜ç»´ç©ºé—´è¿›è¡Œåæ–¹å·®çŸ©é˜µçš„ç‰¹å¾å€¼åˆ†è§£ï¼Œç„¶åç”¨å’ŒPCAä¸€æ ·çš„æ–¹æ³•è¿›è¡Œé™ç»´ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ˜ å°„ğœ™ä¸ç”¨æ˜¾å¼çš„è®¡ç®—ï¼Œè€Œæ˜¯åœ¨éœ€è¦è®¡ç®—çš„æ—¶å€™é€šè¿‡æ ¸å‡½æ•°å®Œæˆã€‚ç”±äºKPCAéœ€è¦æ ¸å‡½æ•°çš„è¿ç®—ï¼Œå› æ­¤å®ƒçš„è®¡ç®—é‡è¦æ¯”PCAå¤§å¾ˆå¤šã€‚

æ€»ç»“, PCAç®—æ³•çš„ä¸»è¦ä¼˜ç‚¹æœ‰ï¼š
1ï¼‰ä»…ä»…éœ€è¦ä»¥æ–¹å·®è¡¡é‡ä¿¡æ¯é‡ï¼Œä¸å—æ•°æ®é›†ä»¥å¤–çš„å› ç´ å½±å“ã€‚ã€€
2ï¼‰å„ä¸»æˆåˆ†ä¹‹é—´æ­£äº¤ï¼Œå¯æ¶ˆé™¤åŸå§‹æ•°æ®æˆåˆ†é—´çš„ç›¸äº’å½±å“çš„å› ç´ ã€‚
3ï¼‰è®¡ç®—æ–¹æ³•ç®€å•ï¼Œä¸»è¦è¿ç®—æ˜¯ç‰¹å¾å€¼åˆ†è§£ï¼Œæ˜“äºå®ç°ã€‚
PCAç®—æ³•çš„ä¸»è¦ç¼ºç‚¹æœ‰ï¼š
1ï¼‰ä¸»æˆåˆ†å„ä¸ªç‰¹å¾ç»´åº¦çš„å«ä¹‰å…·æœ‰ä¸€å®šçš„æ¨¡ç³Šæ€§ï¼Œä¸å¦‚åŸå§‹æ ·æœ¬ç‰¹å¾çš„è§£é‡Šæ€§å¼ºã€‚
2ï¼‰æ–¹å·®å°çš„éä¸»æˆåˆ†ä¹Ÿå¯èƒ½å«æœ‰å¯¹æ ·æœ¬å·®å¼‚çš„é‡è¦ä¿¡æ¯ï¼Œå› é™ç»´ä¸¢å¼ƒå¯èƒ½å¯¹åç»­æ•°æ®å¤„ç†æœ‰å½±å“ã€‚

#### SVD
SVDä¹Ÿæ˜¯å¯¹çŸ©é˜µè¿›è¡Œåˆ†è§£ï¼Œä½†æ˜¯å’Œç‰¹å¾åˆ†è§£ä¸åŒï¼ŒSVDå¹¶ä¸è¦æ±‚è¦åˆ†è§£çš„çŸ©é˜µä¸ºæ–¹é˜µã€‚å‡è®¾æˆ‘ä»¬çš„çŸ©é˜µAæ˜¯ä¸€ä¸ªğ‘šÃ—ğ‘›çš„çŸ©é˜µï¼Œé‚£ä¹ˆæˆ‘ä»¬å®šä¹‰çŸ©é˜µAçš„SVDä¸º$ ğ´=ğ‘ˆÎ£ğ‘‰^ğ‘‡ $
Uæ˜¯ä¸€ä¸ªğ‘šÃ—ğ‘šçš„çŸ©é˜µï¼ŒÎ£æ˜¯ä¸€ä¸ªğ‘šÃ—ğ‘›çš„çŸ©é˜µï¼Œé™¤äº†ä¸»å¯¹è§’çº¿ä¸Šçš„å…ƒç´ ä»¥å¤–å…¨ä¸º0ï¼Œä¸»å¯¹è§’çº¿ä¸Šçš„æ¯ä¸ªå…ƒç´ éƒ½ç§°ä¸ºå¥‡å¼‚å€¼ï¼ŒVæ˜¯ä¸€ä¸ªğ‘›Ã—ğ‘›çš„çŸ©é˜µã€‚Uå’ŒVéƒ½æ˜¯é…‰çŸ©é˜µï¼Œå³æ»¡è¶³$ ğ‘ˆ^ğ‘‡ğ‘ˆ=ğ¼ $,$ ğ‘‰^ğ‘‡ğ‘‰=ğ¼ $

1. è®¡ç®—å³å¥‡å¼‚çŸ©é˜µV
å°†Açš„è½¬ç½®å’ŒAåšçŸ©é˜µä¹˜æ³•ï¼Œä¼šå¾—åˆ°ğ‘›Ã—ğ‘›çš„ä¸€ä¸ªæ–¹é˜µã€‚å°†$ğ´^ğ‘‡ğ´$è¿›è¡Œç‰¹å¾åˆ†è§£ï¼Œå°±å¯ä»¥å¾—åˆ°nä¸ªç‰¹å¾å€¼å’Œå¯¹åº”çš„nä¸ªç‰¹å¾å‘é‡ğ‘£ã€‚å°†$ğ´^ğ‘‡ğ´$çš„æ‰€æœ‰ç‰¹å¾å‘é‡å¼ æˆä¸€ä¸ªğ‘›Ã—ğ‘›çš„çŸ©é˜µVï¼Œå°±æ˜¯SVDå…¬å¼é‡Œé¢çš„VçŸ©é˜µ.
2. è®¡ç®—å·¦å¥‡å¼‚çŸ©é˜µU
å°†Aå’ŒAçš„è½¬ç½®åšçŸ©é˜µä¹˜æ³•ï¼Œä¼šå¾—åˆ°ğ‘šÃ—ğ‘šçš„ä¸€ä¸ªæ–¹é˜µ$ğ´ğ´^ğ‘‡$,å°†$ğ´ğ´^ğ‘‡$çš„æ‰€æœ‰ç‰¹å¾å‘é‡å¼ æˆä¸€ä¸ªğ‘šÃ—ğ‘šçš„çŸ©é˜µUï¼Œå°±æ˜¯SVDå…¬å¼é‡Œé¢çš„UçŸ©é˜µ.
3. è®¡ç®—å¥‡å¼‚å€¼çŸ©é˜µ
ç”±äºÎ£é™¤äº†å¯¹è§’çº¿ä¸Šæ˜¯å¥‡å¼‚å€¼å…¶ä»–ä½ç½®éƒ½æ˜¯0ï¼Œé‚£æˆ‘ä»¬åªéœ€è¦æ±‚å‡ºæ¯ä¸ªå¥‡å¼‚å€¼ğœå°±å¯ä»¥äº†.å¯ä»¥ç”¨ç‰¹å¾å€¼å¼€æ ¹å·,ğœ=ğœ†_i^0.5ç›´æ¥æ±‚å‡ºå¥‡å¼‚å€¼.

å‰10%ç”šè‡³1%çš„å¥‡å¼‚å€¼çš„å’Œå°±å äº†å…¨éƒ¨çš„å¥‡å¼‚å€¼ä¹‹å’Œçš„99%ä»¥ä¸Šçš„æ¯”ä¾‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥ç”¨æœ€å¤§çš„kä¸ªçš„å¥‡å¼‚å€¼å’Œå¯¹åº”çš„å·¦å³å¥‡å¼‚å‘é‡æ¥è¿‘ä¼¼æè¿°çŸ©é˜µ.

åœ¨PCAé™ç»´ä¸­ï¼Œå³å¥‡å¼‚çŸ©é˜µå¯ä»¥ç”¨äºåˆ—æ•°å³ç‰¹å¾ç»´åº¦çš„å‹ç¼©.PCAä¸­éœ€è¦æ‰¾åˆ°æ ·æœ¬åæ–¹å·®çŸ©é˜µ$ğ‘‹^ğ‘‡ğ‘‹$çš„æœ€å¤§çš„dä¸ªç‰¹å¾å‘é‡ï¼Œç„¶åç”¨è¿™æœ€å¤§çš„dä¸ªç‰¹å¾å‘é‡å¼ æˆçš„çŸ©é˜µæ¥åšä½ç»´æŠ•å½±é™ç»´ã€‚å¤šæ ·æœ¬å¤šç‰¹å¾æ•°çš„æ—¶å€™ï¼Œè®¡ç®—é‡å¾ˆå¤§ã€‚
æ³¨æ„è¿™ä¸ªè¿‡ç¨‹å…¶å®å°±æ˜¯SVDä¸­æ±‚è§£å³å¥‡å¼‚çŸ©é˜µ.æœ‰ä¸€äº›SVDçš„å®ç°ç®—æ³•ä¸ç”¨æ±‚å‡ºåæ–¹å·®çŸ©é˜µ$ğ‘‹^ğ‘‡ğ‘‹$ï¼Œä¹Ÿèƒ½æ±‚å‡ºå³å¥‡å¼‚çŸ©é˜µğ‘‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒPCAç®—æ³•å¯ä»¥ä¸ç”¨åšç‰¹å¾åˆ†è§£ï¼Œè€Œæ˜¯åšSVDæ¥å®Œæˆã€‚è¿™ä¸ªæ–¹æ³•åœ¨æ ·æœ¬é‡å¾ˆå¤§çš„æ—¶å€™å¾ˆæœ‰æ•ˆã€‚å®é™…ä¸Šï¼Œscikit-learnçš„PCAç®—æ³•çš„èƒŒåçœŸæ­£çš„å®ç°å°±æ˜¯ç”¨çš„SVDï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æˆ‘ä»¬è®¤ä¸ºçš„æš´åŠ›ç‰¹å¾åˆ†è§£ã€‚
å¦ä¸€æ–¹é¢ï¼Œæ³¨æ„åˆ°PCAä»…ä»…ä½¿ç”¨äº†æˆ‘ä»¬SVDçš„å³å¥‡å¼‚çŸ©é˜µVï¼Œæ²¡æœ‰ä½¿ç”¨å·¦å¥‡å¼‚çŸ©é˜µUï¼Œé‚£ä¹ˆå·¦å¥‡å¼‚çŸ©é˜µæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå‡è®¾æˆ‘ä»¬çš„æ ·æœ¬æ˜¯ğ‘šÃ—ğ‘›çš„çŸ©é˜µXï¼Œå¦‚æœæˆ‘ä»¬é€šè¿‡SVDæ‰¾åˆ°äº†çŸ©é˜µ$ğ‘‹^ğ‘‡ğ‘‹$æœ€å¤§çš„dä¸ªç‰¹å¾å‘é‡å¼ æˆçš„ğ‘šÃ—ğ‘‘ç»´çŸ©é˜µUï¼Œåˆ™æˆ‘ä»¬å¦‚æœè¿›è¡Œå¦‚ä¸‹å¤„ç†ï¼š
$$ ğ‘‹c_{ğ‘‘Ã—ğ‘›}=ğ‘ˆ^ğ‘‡_{ğ‘‘Ã—ğ‘š}ğ‘‹_{ğ‘šÃ—ğ‘›} $$
å¯ä»¥å¾—åˆ°ä¸€ä¸ªğ‘‘Ã—ğ‘›çš„çŸ©é˜µXc,è¿™ä¸ªçŸ©é˜µå’Œæˆ‘ä»¬åŸæ¥çš„ğ‘šÃ—ğ‘›ç»´æ ·æœ¬çŸ©é˜µXç›¸æ¯”ï¼Œè¡Œæ•°ä»må‡åˆ°äº†dï¼Œå¯è§å¯¹è¡Œæ•°è¿›è¡Œäº†å‹ç¼©ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå·¦å¥‡å¼‚çŸ©é˜µå¯ä»¥ç”¨äºè¡Œæ•°çš„å‹ç¼©ã€‚ç›¸å¯¹çš„ï¼Œå³å¥‡å¼‚çŸ©é˜µå¯ä»¥ç”¨äºåˆ—æ•°å³ç‰¹å¾ç»´åº¦çš„å‹ç¼©ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„PCAé™ç»´ã€‚ã€€ã€€ã€€

#### æ‹Ÿç‰›é¡¿æ³•çš„åŸç†
ç‰›é¡¿æ³•çš„æ”¶æ•›é€Ÿåº¦å¿«,è¿­ä»£æ¬¡æ•°å°‘,ä½†æ˜¯HessiançŸ©é˜µå¾ˆç¨ å¯†æ—¶,æ¯æ¬¡è¿­ä»£çš„è®¡ç®—é‡å¾ˆå¤§,éšç€æ•°æ®è§„æ¨¡å¢å¤§,HessiançŸ©é˜µä¹Ÿä¼šå˜å¤§,éœ€è¦æ›´å¤šçš„å­˜å‚¨ç©ºé—´ä»¥åŠè®¡ç®—é‡ã€‚æ‹Ÿç‰›é¡¿æ³•å°±æ˜¯åœ¨ç‰›é¡¿æ³•çš„åŸºç¡€ä¸Šå¼•å…¥äº†HessiançŸ©é˜µçš„è¿‘ä¼¼çŸ©é˜µ,é¿å…äº†æ¯æ¬¡éƒ½è®¡ç®—HessiançŸ©é˜µçš„é€†,åœ¨æ‹Ÿç‰›é¡¿æ³•ä¸­,ç”¨HessiançŸ©é˜µçš„é€†çŸ©é˜µæ¥ä»£æ›¿HessiançŸ©é˜µ,è™½ç„¶ä¸èƒ½åƒç‰›é¡¿æ³•é‚£æ ·ä¿è¯æœ€ä¼˜åŒ–çš„æ–¹å‘,ä½†å…¶é€†çŸ©é˜µå§‹ç»ˆæ˜¯æ­£å®šçš„,å› æ­¤ç®—æ³•å§‹ç»ˆæœä¼˜åŒ–çš„æ–¹å‘æœç´¢ã€‚

#### æ¢¯åº¦ä¸‹é™æ³•å’Œç‰›é¡¿æ³•åŒºåˆ«
æ¢¯åº¦ä¸‹é™æ³•ï¼šåˆ©ç”¨ä¸€é˜¶å¯¼æ•°
ç‰›é¡¿æ³•ï¼šåˆ©ç”¨äºŒé˜¶å¯¼æ•°ï¼Œæ”¶æ•›é€Ÿåº¦å¿«ï¼›ä½†å¯¹ç›®æ ‡å‡½æ•°æœ‰ä¸¥æ ¼è¦æ±‚ï¼Œå¿…é¡»æœ‰è¿ç»­çš„ä¸€ã€äºŒé˜¶åå¯¼æ•°ï¼Œè®¡ç®—é‡å¤§

#### stack, blending åŸç†ä¸åŒºåˆ«
stackingï¼š
å‡è®¾æœ‰nä¸ªåŸºæ¨¡å‹ï¼Œä½¿ç”¨k-foldäº¤å‰éªŒè¯ã€‚å¯¹äºæ¯ä¸ªåŸºæ¨¡å‹å–k-1ä»½æ•°æ®ä½œä¸ºè®­ç»ƒé›†ï¼Œå‰©ä¸‹çš„ä¸€ä»½ä½œä¸ºéªŒè¯é›†ï¼Œé‡å¤kæ¬¡ï¼Œå¾—åˆ°kä¸ªæ¨¡å‹ä¸kä¸ªéªŒè¯é›†ä¸Šçš„è¾“å‡ºã€‚å°†éªŒè¯é›†ä¸Šçš„è¾“å‡ºçºµå‘æ‹¼æ¥èµ·æ¥ï¼Œä½œä¸ºç¬¬äºŒå±‚æ¨¡å‹çš„è®­ç»ƒé›†Pã€‚å¯¹äºnä¸ªåŸºæ¨¡å‹ï¼Œå¾—åˆ°nç»´çš„Pï¼Œä½œä¸ºç¬¬äºŒå±‚çš„è®­ç»ƒé›†ã€‚è®­ç»ƒæ—¶ï¼Œç¬¬ä¸€å±‚ï¼Œç¬¬äºŒå±‚çš„labeléƒ½æ˜¯åŸå§‹labelã€‚åœ¨é¢„æµ‹é˜¶æ®µï¼Œç‰¹å¾è¾“å…¥k*nä¸ªæ¨¡å‹ï¼Œåœ¨ç»´åº¦kä¸Šå–å‡å€¼å¾—åˆ°ç¬¬ä¸€å±‚åŸºæ¨¡å‹çš„é¢„æµ‹ï¼Œç„¶åè¾“å…¥ç¬¬äºŒå±‚æ¨¡å‹ï¼Œå¾—åˆ°æœ€ç»ˆè¾“å‡ºã€‚
blendingï¼š
blending æ¯æ¬¡åªè®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œè€Œstackingè®­ç»ƒæ¨¡å‹æ•°å’Œäº¤å‰éªŒè¯æŠ˜æ•°ç›¸å…³ï¼›
blending è®­ç»ƒæ—¶è®­ç»ƒé›†å’ŒéªŒè¯é›†æ˜¯ç¡®å®šä¸å˜çš„ï¼Œstackingåˆ™æ˜¯é€šè¿‡äº¤å‰éªŒè¯ä½¿å¾—æ‰€æœ‰æ•°æ®éƒ½åšè¿‡éªŒè¯é›†ã€‚

#### Adaboost
åŸºå­¦ä¹ å™¨GåŠ æƒè¯¯å·®ç‡e, åŸºå­¦ä¹ å™¨æƒé‡ç³»æ•°a, è®­ç»ƒé›†æ¯ä¸ªæ ·æœ¬çš„ç›¸å¯¹è¯¯å·® e_i, è®­ç»ƒé›†æ¯ä¸ªæ ·æœ¬æƒé‡w
æ¯ä¸ªæ ·æœ¬çš„ç›¸å¯¹è¯¯å·® e_i
$$ e_i = \frac{|y_i-G_k(x_i)|}{max(|y_i-G_k(x_i)|)} $$
åŸºå­¦ä¹ å™¨GåŠ æƒè¯¯å·®e
$$ e = \sum_{i=1}^m w_i e_i $$

$$ a = 1/2 log \frac{1-e}{e} $$

$$ w_{k+1} = \frac{w_k}{Z} e^{-a_k y G_k(x)} $$

è§„èŒƒåŒ–å› å­
$$ Z = \sum^m_{i=1} w_k e^{-a_k y G_k(x)} $$

å¾—åˆ°kä¸ªå¼±åˆ†ç±»å™¨,æœ€ç»ˆå¼ºåˆ†ç±»å™¨ä¸ºä»–ä»¬çš„åŠ æƒå’Œ
å‚è€ƒ https://www.cnblogs.com/pinard/p/6133937.html

#### knn
å°±æ˜¯åœ¨è®­ç»ƒé›†ä¸­æ•°æ®å’Œæ ‡ç­¾å·²çŸ¥çš„æƒ…å†µä¸‹ï¼Œè¾“å…¥æµ‹è¯•æ•°æ®ï¼Œå°†æµ‹è¯•æ•°æ®çš„ç‰¹å¾ä¸è®­ç»ƒé›†ä¸­å¯¹åº”çš„ç‰¹å¾è¿›è¡Œç›¸äº’æ¯”è¾ƒï¼Œæ‰¾åˆ°è®­ç»ƒé›†ä¸­ä¸ä¹‹æœ€ä¸ºç›¸ä¼¼çš„å‰Kä¸ªæ•°æ®ï¼Œåˆ™è¯¥æµ‹è¯•æ•°æ®å¯¹åº”çš„ç±»åˆ«å°±æ˜¯Kä¸ªæ•°æ®ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„é‚£ä¸ªåˆ†ç±»

### python çŸ¥è¯†ç‚¹
#### æ·±æ‹·è´,æµ…æ‹·è´
ç›´æ¥èµ‹å€¼ï¼šä¸ºå¯¹è±¡å–åˆ«å,ä¸¤ä¸ªå¯¹è±¡çš„idç›¸åŒ. a=1, b=a
æµ…æ‹·è´(copy)ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ç€åŸå§‹å¯¹è±¡å±æ€§å€¼çš„ä¸€ä»½ç²¾ç¡®æ‹·è´ã€‚å¦‚æœå±æ€§æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ï¼Œå¦‚æœå±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯å†…å­˜åœ°å€ ï¼Œæ‰€ä»¥å¦‚æœå…¶ä¸­ä¸€ä¸ªå¯¹è±¡æ”¹å˜äº†è¿™ä¸ªåœ°å€ï¼Œå°±ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚
æ·±æ‹·è´(deepcopy)ï¼šæ‹·è´çˆ¶å¯¹è±¡,å¹¶é€’å½’çš„æ‹·è´åŸå¯¹è±¡æ‰€åŒ…å«çš„å­å¯¹è±¡.æ·±æ‹·è´å‡ºæ¥çš„å¯¹è±¡ä¸åŸå¯¹è±¡æ²¡æœ‰ä»»ä½•å…³è”. 2ç»´æ•°ç»„

```python
def deepcopy(entry):
  if isinstance(entry, dict):
    return {k: deepcopy(v) for k, v in entry.items()}
  elif isinstance(entry, list):
    return [deepcopy(item) for item in entry]
  elif isinstance(entry, tuple):
    return (deepcopy(item) for item in entry)
  else:
    return entry
```

#### GIL
GIL æ˜¯pythonçš„å…¨å±€è§£é‡Šå™¨é”ï¼ŒåŒä¸€è¿›ç¨‹ä¸­å‡å¦‚æœ‰å¤šä¸ªçº¿ç¨‹è¿è¡Œï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨è¿è¡Œpythonç¨‹åºçš„æ—¶å€™ä¼šéœ¸å pythonè§£é‡Šå™¨ï¼ˆåŠ äº†ä¸€æŠŠé”å³GILï¼‰ï¼Œä½¿è¯¥è¿›ç¨‹å†…çš„å…¶ä»–çº¿ç¨‹æ— æ³•è¿è¡Œï¼Œç­‰è¯¥çº¿ç¨‹è¿è¡Œå®Œåå…¶ä»–çº¿ç¨‹æ‰èƒ½è¿è¡Œã€‚å¦‚æœçº¿ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­é‡åˆ°è€—æ—¶æ“ä½œï¼Œåˆ™è§£é‡Šå™¨é”è§£å¼€ï¼Œä½¿å…¶ä»–çº¿ç¨‹è¿è¡Œã€‚æ‰€ä»¥åœ¨å¤šçº¿ç¨‹ä¸­ï¼Œçº¿ç¨‹çš„è¿è¡Œä»æ˜¯æœ‰å…ˆåé¡ºåºçš„ï¼Œå¹¶ä¸æ˜¯åŒæ—¶è¿›è¡Œã€‚

å¤šè¿›ç¨‹ä¸­å› ä¸ºæ¯ä¸ªè¿›ç¨‹éƒ½èƒ½è¢«ç³»ç»Ÿåˆ†é…èµ„æºï¼Œç›¸å½“äºæ¯ä¸ªè¿›ç¨‹æœ‰äº†ä¸€ä¸ªpythonè§£é‡Šå™¨ï¼Œæ‰€ä»¥å¤šè¿›ç¨‹å¯ä»¥å®ç°å¤šä¸ªè¿›ç¨‹çš„åŒæ—¶è¿è¡Œï¼Œç¼ºç‚¹æ˜¯è¿›ç¨‹ç³»ç»Ÿèµ„æºå¼€é”€å¤§ã€‚


#### *args, **kwargs
å½“æˆ‘ä»¬ä¸çŸ¥é“å‘å‡½æ•°ä¼ é€’å¤šå°‘å‚æ•°æ—¶ï¼Œæ¯”å¦‚æˆ‘ä»¬å‘ä¼ é€’ä¸€ä¸ªåˆ—è¡¨æˆ–å…ƒç»„ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨*argsã€‚

```python
def func(*args):
    for i in args:
        print(i)
func(3,2,1,4,7)
```

åœ¨æˆ‘ä»¬ä¸çŸ¥é“è¯¥ä¼ é€’å¤šå°‘å…³é”®å­—å‚æ•°æ—¶ï¼Œä½¿ç”¨**kwargsæ¥æ”¶é›†å…³é”®å­—å‚æ•°ã€‚
```python
def func(**kwargs):
    for i in kwargs:
        print(i,kwargs[i])
func(a=1,b=2,c=7)
```

#### è£…é¥°å™¨
è£…é¥°å™¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªPythonå‡½æ•°ï¼Œå®ƒå¯ä»¥è®©å…¶å®ƒå‡½æ•°åœ¨ä¸ä½œä»»ä½•å˜åŠ¨çš„æƒ…å†µä¸‹å¢åŠ é¢å¤–åŠŸèƒ½ï¼Œè£…é¥°å™¨çš„è¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡. æ¯”å¦‚ï¼šæ’å…¥æ—¥å¿—ã€æ€§èƒ½æµ‹è¯•ã€äº‹åŠ¡å¤„ç†ã€ç¼“å­˜ã€æƒé™æ ¡éªŒç­‰ã€‚æœ‰äº†è£…é¥°å™¨æˆ‘ä»¬å°±å¯ä»¥æŠ½ç¦»å‡ºå¤§é‡çš„ä¸å‡½æ•°åŠŸèƒ½æ— å…³çš„é›·åŒä»£ç è¿›è¡Œé‡ç”¨ã€‚è£…é¥°å™¨å…¶å®å°±æ˜¯ä¸€ä¸ªé—­åŒ….
```python
def log(text):
    def decorator(func):
        def wrapper(*args, **kw):
            print("{} {}():" % (text, func.__name__))
            return func(*args, **kw)
        return wrapper
    return decorator

@log('execute')
def now():
    print('2015-3-25')
>>> now()
>>> execute now():
>>> 2015-3-25

import time
def time_decorator(func):
    def wrapper(*args, **kw):
        start = time.time()
        result = func(*args, **kw)
        print(time.time() - start)
        return result
    return wrapper
```
é¢å‘åˆ‡é¢ç¼–ç¨‹. åˆ‡é¢:åˆ‡å…¥åˆ° æŒ‡å®šç±»oræŒ‡å®šæ–¹æ³• çš„ä»£ç ç‰‡æ®µ. åˆ‡å…¥ç‚¹:åˆ‡å…¥åˆ° å“ªäº›ç±»oræ–¹æ³•

#### ç”Ÿæˆå™¨
ç”Ÿæˆå™¨æ˜¯ä¸€ä¸ªè¿”å›è¿­ä»£å™¨çš„å‡½æ•°ï¼Œä¸éœ€è¦åƒè¿­ä»£å™¨çš„ç±»ä¸€æ ·å†™__iter__()å’Œ__next__()æ–¹æ³•ï¼Œåªéœ€è¦ä¸€ä¸ªyiledå…³é”®å­—ï¼Œæ¯æ¬¡é‡åˆ°yieldæ—¶å‡½æ•°ä¼šæš‚åœå¹¶ä¿å­˜å½“å‰æ‰€æœ‰çš„è¿è¡Œä¿¡æ¯ï¼Œè¿”å›yieldçš„å€¼,å¹¶åœ¨ä¸‹ä¸€æ¬¡æ‰§è¡Œnext()æ–¹æ³•æ—¶ä»å½“å‰ä½ç½®ç»§ç»­è¿è¡Œ.

#### è¿­ä»£å™¨
è¿­ä»£å™¨æ˜¯ä¸€ä¸ªå¯ä»¥è®°ä½éå†çš„ä½ç½®çš„å¯¹è±¡ã€‚è¿­ä»£å™¨å¯¹è±¡ä»é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹è®¿é—®ï¼Œç›´åˆ°æ‰€æœ‰çš„å…ƒç´ è¢«è®¿é—®å®Œç»“æŸã€‚è¿­ä»£å™¨åªèƒ½å¾€å‰ä¸ä¼šåé€€ã€‚è¿­ä»£å™¨æœ‰ä¸¤ä¸ªåŸºæœ¬çš„æ–¹æ³•ï¼šiter() å’Œ next()ã€‚

#### python å†…å­˜ç®¡ç†
å‚è€ƒ: https://juejin.im/post/5ca2471df265da307b2d45a3

##### å†…å­˜æ± æœºåˆ¶
**å†…å­˜æ± æœºåˆ¶**ï¼Œç”¨äºå¯¹å†…å­˜çš„ç”³è¯·å’Œé‡Šæ”¾ç®¡ç†ã€‚å†…å­˜æ± çš„æ¦‚å¿µå°±æ˜¯é¢„å…ˆåœ¨å†…å­˜ä¸­ç”³è¯·ä¸€å®šæ•°é‡çš„ï¼Œå¤§å°ç›¸ç­‰çš„å†…å­˜å—ç•™ä½œå¤‡ç”¨ï¼Œå½“æœ‰æ–°çš„å†…å­˜éœ€æ±‚æ—¶ï¼Œå°±å…ˆä»å†…å­˜æ± ä¸­åˆ†é…å†…å­˜ç»™è¿™ä¸ªéœ€æ±‚ï¼Œä¸å¤Ÿäº†ä¹‹åå†ç”³è¯·æ–°çš„å†…å­˜. è¿™æ ·åšæœ€æ˜¾è‘—çš„ä¼˜åŠ¿å°±æ˜¯èƒ½å¤Ÿå‡å°‘å†…å­˜ç¢ç‰‡ï¼Œæå‡æ•ˆç‡ã€‚
##### åƒåœ¾å›æ”¶æœºåˆ¶
**åƒåœ¾å›æ”¶æœºåˆ¶**ï¼Œä¸€æ˜¯æ‰¾åˆ°å†…å­˜ä¸­æ— ç”¨çš„åƒåœ¾å¯¹è±¡èµ„æºï¼ŒäºŒæ˜¯æ¸…é™¤æ‰¾åˆ°çš„è¿™äº›åƒåœ¾å¯¹è±¡ï¼Œé‡Šæ”¾å†…å­˜ç»™å…¶ä»–å¯¹è±¡ä½¿ç”¨ã€‚Python é‡‡ç”¨äº†`å¼•ç”¨è®¡æ•°`ä¸ºä¸»,`æ ‡è®°æ¸…é™¤`å’Œ`åˆ†ä»£å›æ”¶`ä¸ºè¾…åŠ©ç­–ç•¥ã€‚
###### 1 å¼•ç”¨è®¡æ•°
`å¼•ç”¨è®¡æ•°`: æ¯ä¸€ä¸ªå¯¹è±¡,éƒ½ä¼šæœ‰ä¸€ä¸ªè®¡æ•°å­—æ®µ.å½“ä¸€ä¸ªå¯¹è±¡æœ‰æ–°çš„å¼•ç”¨æ—¶ï¼Œå®ƒçš„ob_refcntå°±ä¼šå¢åŠ ï¼Œå½“å¼•ç”¨å®ƒçš„å¯¹è±¡è¢«åˆ é™¤ï¼Œå®ƒçš„ob_refcntå°±ä¼šå‡å°‘. ä¸€æ—¦å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º0ï¼Œè¯¥å¯¹è±¡ç«‹å³è¢«å›æ”¶ï¼Œå¯¹è±¡å ç”¨çš„å†…å­˜ç©ºé—´å°†è¢«é‡Šæ”¾.
```sh
ä¼˜ç‚¹:
1. ç®€å•
2. å®æ—¶æ€§ï¼šä¸€æ—¦æ²¡æœ‰å¼•ç”¨ï¼Œå†…å­˜å°±ç›´æ¥é‡Šæ”¾äº†ã€‚ä¸ç”¨åƒå…¶ä»–æœºåˆ¶ç­‰åˆ°ç‰¹å®šæ—¶æœºã€‚

ç¼ºç‚¹:
1. éœ€è¦é¢å¤–çš„ç©ºé—´ç»´æŠ¤å¼•ç”¨è®¡æ•°ã€‚
2. ä¸èƒ½è§£å†³å¯¹è±¡çš„å¾ªç¯å¼•ç”¨ã€‚(ä¸»è¦ç¼ºç‚¹)
```
```
>>>a = { } #å¯¹è±¡Açš„å¼•ç”¨è®¡æ•°ä¸º 1
>>>b = { } #å¯¹è±¡Bçš„å¼•ç”¨è®¡æ•°ä¸º 1
>>>a['b'] = b  #Bçš„å¼•ç”¨è®¡æ•°å¢1
>>>b['a'] = a  #Açš„å¼•ç”¨è®¡æ•°å¢1
>>>del a #Açš„å¼•ç”¨å‡ 1ï¼Œæœ€åAå¯¹è±¡çš„å¼•ç”¨ä¸º 1
>>>del b #Bçš„å¼•ç”¨å‡ 1, æœ€åBå¯¹è±¡çš„å¼•ç”¨ä¸º 1
```

###### 2 æ ‡è®°æ¸…é™¤
æ ‡è®°æ¸…é™¤ä¸»è¦æ˜¯è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚
æ ‡è®°æ¸…é™¤ç®—æ³•æ˜¯ä¸€ç§åŸºäºè¿½è¸ªå›æ”¶ï¼ˆtracing GCï¼‰æŠ€æœ¯å®ç°çš„åƒåœ¾å›æ”¶ç®—æ³•ã€‚åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šç¬¬ä¸€é˜¶æ®µæ˜¯æ ‡è®°é˜¶æ®µï¼ŒGCä¼šæŠŠæ‰€æœ‰çš„æ´»åŠ¨å¯¹è±¡æ‰“ä¸Šæ ‡è®°ï¼Œç¬¬äºŒé˜¶æ®µæ˜¯æŠŠé‚£äº›æ²¡æœ‰æ ‡è®°çš„å¯¹è±¡éæ´»åŠ¨å¯¹è±¡è¿›è¡Œå›æ”¶ã€‚
é‚£ä¹ˆGCåˆæ˜¯å¦‚ä½•åˆ¤æ–­å“ªäº›æ˜¯æ´»åŠ¨å¯¹è±¡å“ªäº›æ˜¯éæ´»åŠ¨å¯¹è±¡çš„å‘¢ï¼Ÿå¯¹è±¡ä¹‹é—´é€šè¿‡å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰è¿åœ¨ä¸€èµ·ï¼Œæ„æˆä¸€ä¸ªæœ‰å‘å›¾ï¼Œå¯¹è±¡æ„æˆè¿™ä¸ªæœ‰å‘å›¾çš„èŠ‚ç‚¹ï¼Œè€Œå¼•ç”¨å…³ç³»æ„æˆè¿™ä¸ªæœ‰å‘å›¾çš„è¾¹ã€‚ä»æ ¹å¯¹è±¡ï¼ˆroot objectï¼‰å‡ºå‘ï¼Œæ²¿ç€æœ‰å‘è¾¹éå†å¯¹è±¡ï¼Œå¯è¾¾çš„ï¼ˆreachableï¼‰å¯¹è±¡æ ‡è®°ä¸ºæ´»åŠ¨å¯¹è±¡ï¼Œä¸å¯è¾¾çš„å¯¹è±¡å°±æ˜¯è¦è¢«æ¸…é™¤çš„éæ´»åŠ¨å¯¹è±¡ã€‚æ ¹å¯¹è±¡å°±æ˜¯å…¨å±€å˜é‡ã€è°ƒç”¨æ ˆã€å¯„å­˜å™¨ã€‚
![20200521_230432_58](assets/20200521_230432_58.png)
åœ¨ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬æŠŠå°é»‘åœˆè§†ä¸ºå…¨å±€å˜é‡ï¼Œä¹Ÿå°±æ˜¯æŠŠå®ƒä½œä¸ºroot objectï¼Œä»å°é»‘åœˆå‡ºå‘ï¼Œå¯¹è±¡1å¯ç›´è¾¾ï¼Œé‚£ä¹ˆå®ƒå°†è¢«æ ‡è®°ï¼Œå¯¹è±¡2ã€3å¯é—´æ¥åˆ°è¾¾ä¹Ÿä¼šè¢«æ ‡è®°ï¼Œè€Œ4å’Œ5ä¸å¯è¾¾ï¼Œé‚£ä¹ˆ1ã€2ã€3å°±æ˜¯æ´»åŠ¨å¯¹è±¡ï¼Œ4å’Œ5æ˜¯éæ´»åŠ¨å¯¹è±¡ä¼šè¢«GCå›æ”¶ã€‚
æ ‡è®°æ¸…é™¤ç®—æ³•ä½œä¸º Python çš„è¾…åŠ©åƒåœ¾æ”¶é›†æŠ€æœ¯ä¸»è¦å¤„ç†çš„æ˜¯å®¹å™¨å¯¹è±¡(container)ï¼Œæ¯”å¦‚listã€dictã€tupleç­‰ï¼Œå› ä¸ºå¯¹äºå­—ç¬¦ä¸²ã€æ•°å€¼å¯¹è±¡æ˜¯ä¸å¯èƒ½é€ æˆå¾ªç¯å¼•ç”¨é—®é¢˜ã€‚Pythonä½¿ç”¨ä¸€ä¸ªåŒå‘é“¾è¡¨å°†è¿™äº›å®¹å™¨å¯¹è±¡ç»„ç»‡èµ·æ¥ã€‚
Python è¿™ç§ç®€å•ç²—æš´çš„æ ‡è®°æ¸…é™¤ç®—æ³•ä¹Ÿæœ‰æ˜æ˜¾çš„ç¼ºç‚¹ï¼šæ¸…é™¤éæ´»åŠ¨çš„å¯¹è±¡å‰å®ƒå¿…é¡»é¡ºåºæ‰«ææ•´ä¸ªå †å†…å­˜ï¼Œå“ªæ€•åªå‰©ä¸‹å°éƒ¨åˆ†æ´»åŠ¨å¯¹è±¡ä¹Ÿè¦æ‰«ææ‰€æœ‰å¯¹è±¡ã€‚

###### 3 åˆ†ä»£å›æ”¶
åˆ†ä»£å›æ”¶æ˜¯ä¸€ç§ä»¥ç©ºé—´æ¢æ—¶é—´çš„æ“ä½œæ–¹å¼ã€‚
Pythonå°†å†…å­˜æ ¹æ®å¯¹è±¡çš„å­˜æ´»æ—¶é—´åˆ’åˆ†ä¸ºä¸åŒçš„é›†åˆï¼Œæ¯ä¸ªé›†åˆç§°ä¸ºä¸€ä¸ªä»£ï¼ŒPythonå°†å†…å­˜åˆ†ä¸ºäº†3â€œä»£â€ï¼Œåˆ†åˆ«ä¸ºå¹´è½»ä»£ï¼ˆç¬¬0ä»£ï¼‰ã€ä¸­å¹´ä»£ï¼ˆç¬¬1ä»£ï¼‰ã€è€å¹´ä»£ï¼ˆç¬¬2ä»£ï¼‰ï¼Œä»–ä»¬å¯¹åº”çš„æ˜¯3ä¸ªé“¾è¡¨ï¼Œå®ƒä»¬çš„åƒåœ¾æ”¶é›†é¢‘ç‡ä¸å¯¹è±¡çš„å­˜æ´»æ—¶é—´çš„å¢å¤§è€Œå‡å°ã€‚æ–°åˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šåˆ†é…åœ¨å¹´è½»ä»£ï¼Œå¹´è½»ä»£é“¾è¡¨çš„æ€»æ•°è¾¾åˆ°ä¸Šé™æ—¶ï¼ŒPythonåƒåœ¾æ”¶é›†æœºåˆ¶å°±ä¼šè¢«è§¦å‘ï¼ŒæŠŠé‚£äº›å¯ä»¥è¢«å›æ”¶çš„å¯¹è±¡å›æ”¶æ‰ï¼Œè€Œé‚£äº›ä¸ä¼šå›æ”¶çš„å¯¹è±¡å°±ä¼šè¢«ç§»åˆ°ä¸­å¹´ä»£å»ï¼Œä¾æ­¤ç±»æ¨ï¼Œè€å¹´ä»£ä¸­çš„å¯¹è±¡æ˜¯å­˜æ´»æ—¶é—´æœ€ä¹…çš„å¯¹è±¡ï¼Œç”šè‡³æ˜¯å­˜æ´»äºæ•´ä¸ªç³»ç»Ÿçš„ç”Ÿå‘½å‘¨æœŸå†…ã€‚åŒæ—¶ï¼Œåˆ†ä»£å›æ”¶æ˜¯å»ºç«‹åœ¨æ ‡è®°æ¸…é™¤æŠ€æœ¯åŸºç¡€ä¹‹ä¸Šã€‚åˆ†ä»£å›æ”¶åŒæ ·ä½œä¸ºPythonçš„è¾…åŠ©åƒåœ¾æ”¶é›†æŠ€æœ¯å¤„ç†å®¹å™¨å¯¹è±¡ã€‚

#### list åº•å±‚
Pythonä¸­çš„listæ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œå®ƒå‚¨å­˜åœ¨ä¸€ä¸ªè¿ç»­çš„å†…å­˜å—ä¸­ï¼Œéšæœºå­˜å–çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Œä½†æ’å…¥å’Œåˆ é™¤æ—¶ä¼šé€ æˆå†…å­˜å—çš„ç§»åŠ¨ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(n)ã€‚åŒæ—¶ï¼Œå½“æ•°ç»„ä¸­å†…å­˜ä¸å¤Ÿæ—¶ï¼Œä¼šé‡æ–°ç”³è¯·ä¸€å—å†…å­˜ç©ºé—´å¹¶è¿›è¡Œå†…å­˜æ‹·è´ã€‚
PyListObjectäº”ä¸ªå±æ€§: ob_refcnt, *obtype, ob_size, **ob_item, allocated.*
pythonçš„åˆ—è¡¨æ€»æ˜¯ä¼šè¢«é¢‘ç¹çš„æ·»åŠ æˆ–è€…åˆ é™¤å…ƒç´ ï¼Œå› æ­¤é¢‘ç¹çš„ç”³è¯·é‡Šæ”¾å†…å­˜æ˜¾ç„¶æ˜¯ä¸æ˜æ™ºçš„,æ‰€ä»¥pythonçš„åˆ—è¡¨åœ¨åˆ›å»ºæ—¶æ€»æ˜¯ä¼šç”³è¯·ä¸€å¤§å—å†…å­˜ï¼Œç”³è¯·çš„å†…å­˜å¤§å°å°±è®°å½•åœ¨ allocated ä¸Š, å·²ç»ä½¿ç”¨çš„å°±è®°å½•åœ¨ ob_size.
å½“é€šè¿‡ PyObject_GC_New åˆ›å»ºåˆ—è¡¨ä¹‹åï¼Œå…¶å®é‡Œé¢çš„å…ƒç´ éƒ½æ˜¯null.
list èµ‹å€¼ æ­¥éª¤
1 å‚æ•°ç±»å‹æ£€æŸ¥
2 ç´¢å¼• æœ‰æ•ˆæ€§æ£€æŸ¥ ä¸å¯è¶…å‡ºç´¢å¼•
3 è®¾ç½®å…ƒç´ 
list insert æ­¥éª¤
1 å‚æ•°æ£€æŸ¥
2 ä»æ–°è°ƒæ•´åˆ—è¡¨å®¹é‡ é€šè¿‡ list_resize æ–¹æ³•ç¡®å®š æ˜¯å¦éœ€è¦ç”³è¯·å†…å­˜
3 ç¡®å®šæ’å…¥ç‚¹
4 æ’å…¥å…ƒç´  (åˆ—è¡¨æ’å…¥æ—¶ éƒ½ä¼šå°†åé¢çš„ä½ç½®çš„å…ƒç´ é‡æ–°ç§»åŠ¨)
list append æ­¥éª¤
1 å‚æ•°æ£€æŸ¥
2 å®¹é‡æ£€æŸ¥
3 è°ƒç”¨ list_resize æ–¹æ³•æ£€æŸ¥æ˜¯å¦éœ€è¦ç”³è¯·å†…å­˜
4 æ·»åŠ å…ƒç´ 

å‚è€ƒ:https://blog.csdn.net/lucky404/article/details/79596319
https://juejin.im/post/595f0de75188250d781cfd12
http://wklken.me/posts/2014/08/10/python-source-list.html

#### dict åº•å±‚å®ç°
å“ˆå¸Œè¡¨ï¼Œæ ¹æ®é”®Key, ç›´æ¥å¯¹å‚¨å­˜ä½ç½®è¿›è¡Œè®¿é—®çš„æ•°æ®ç»“æ„ã€‚å­˜å‚¨ä½ç½®å¯ç›´æ¥é€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—ã€‚
å¸¸ç”¨çš„å“ˆå¸Œå‡½æ•°:
1. ç›´æ¥å®šç½®æ³•. å–å…³é”®å­—çš„æŸä¸ªçº¿æ€§å‡½æ•°å€¼ä¸ºæ•£åˆ—åœ°å€. hash(k)=ak+bï¼Œa,bä¸ºå¸¸æ•°.
2. é™¤ç•™ä½™æ•°æ³•. å–å…³é”®å­—é™¤pçš„ä½™æ•°ä¸ºå“ˆå¸Œåœ°å€. hash(k) = k mod p, p<=m. m ä¸ºå“ˆå¸Œè¡¨é•¿åº¦.
3. æ•°å­—åˆ†ææ³•. å–å…³é”®å­—çš„è‹¥å¹²æ•°ä½ç»„æˆå“ˆå¸Œåœ°å€.

éšç€æ•°æ®çš„å¢åŠ ,å½“é€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—çš„å­˜å‚¨åœ°å€å·²ç»æœ‰å€¼äº†,ä¼šå‘ç”Ÿå“ˆå¸Œå†²çª. python é€šè¿‡å¼€æ”¾å®šå€æ³•è§£å†³å“ˆå¸Œå†²çª, JAVA hashMapé€šè¿‡æ‹‰é“¾æ³•, æ­¤å¤–è¿˜æœ‰å†æ„å»ºå“ˆå¸Œå‡½æ•°ç­‰æ–¹æ³•.
- å¼€æ”¾å®šå€æ³•: äº§ç”Ÿå“ˆå¸Œå†²çªæ—¶, python é€šè¿‡ä¸€ä¸ªäºŒæ¬¡æ¢æµ‹å‡½æ•°(å¢é‡åºåˆ—:çº¿æ€§,å¹³æ–¹,ä¼ªéšæœº), è®¡ç®—ä¸‹ä¸€ä¸ªå€™é€‰ä½ç½®, å½“ä¸‹ä¸€ä¸ªä½ç½®å¯ç”¨, å°†æ•°æ®æ’å…¥è¯¥ä½ç½®, å¦‚æœä¸å¯ç”¨åˆ™å†æ¬¡è°ƒç”¨æ¢æµ‹å‡½æ•°, è·å¾—ä¸‹ä¸€ä¸ªå€™é€‰ä½ç½®.
å¼€æ”¾å®šå€æ³•å­˜åœ¨çš„é—®é¢˜: é€šè¿‡å¤šæ¬¡ä½¿ç”¨äºŒæ¬¡æ¢æµ‹å‡½æ•°f(å¢é‡åºåˆ—)ï¼Œæ¯ä¸€ä¸ªä½ç½®å¯¹ä¸Šä¸€ä¸ªä½ç½®éƒ½æœ‰ä¾èµ–, è¿™å½¢æˆäº†ä¸€ä¸ª â€˜å†²çªæ¢æµ‹é“¾â€™, å½“éœ€è¦åˆ é™¤æ¢æµ‹é“¾ä¸Šä¸­é—´çš„æŸä¸ªæ•°æ®æ—¶, ä¼šå¯¼è‡´æ¢æµ‹é“¾æ–­è£‚, æ— æ³•è®¿é—®åˆ°ååºä½ç½®. æ‰€ä»¥é‡‡ç”¨å¼€æ”¾å®šåœ°æ³•ï¼Œåˆ é™¤é“¾è·¯ä¸Šçš„æŸä¸ªå…ƒç´ æ—¶ï¼Œä¸èƒ½çœŸæ­£çš„åˆ é™¤å…ƒç´ ï¼Œåªèƒ½â€˜ä¼ªåˆ é™¤â€™.
pythonå­—å…¸çš„ä¸‰ç§çŠ¶æ€ Unused, Active, Dummy. å½“å­—å…¸ä¸­çš„ key å’Œ value è¢«åˆ é™¤åå­—å…¸ä¸èƒ½ä»Active ç›´æ¥è¿›å…¥ Unused çŠ¶æ€ å¦åˆ™ä¼šå‡ºç°å†²çªé“¾è·¯ä¸­æ–­,å®é™…ä¸Špythonè¿›è¡Œåˆ é™¤å­—å…¸å…ƒç´ æ—¶ï¼Œä¼šå°†keyçš„çŠ¶æ€æ”¹ä¸ºDummy ,è¿™å°±æ˜¯ pythonçš„ â€˜ä¼ªåˆ é™¤â€™.
- æ‹‰é“¾æ³•: å°†é€šè¿‡å“ˆå¸Œå‡½æ•°æ˜ å°„åˆ°åŒä¸€ä¸ªå­˜å‚¨ä½ç½®çš„æ‰€æœ‰å…ƒç´ ä¿å­˜åœ¨ä¸€ä¸ªé“¾è¡¨ä¸­. JAVA 1.8ä¹‹å, å½“é“¾è¡¨é•¿åº¦è¶…è¿‡é˜ˆå€¼æ—¶, å°†é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘.

è½½è·å› å­ = å¡«å…¥è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•° / æ•£åˆ—è¡¨çš„é•¿åº¦
å¯¹äºå¼€æ”¾å®šå€æ³•ï¼Œè½½è·å› å­å¾ˆé‡è¦ï¼Œåº”ä¸¥æ ¼é™åˆ¶åœ¨0.7-0.8ä»¥ä¸‹ã€‚è¶…è¿‡0.8ï¼ŒæŸ¥è¡¨æ—¶çš„ç¼“å­˜ä¸å‘½ä¸­ï¼ˆcache missingï¼‰æŒ‰ç…§æŒ‡æ•°æ›²çº¿ä¸Šå‡ã€‚è¶…è¿‡è½½è·å› å­é˜ˆå€¼, éœ€è¦resizeæ‰©å®¹å“ˆå¸Œè¡¨ã€‚(æ‰©å®¹åhashcodeéœ€è¦é‡æ–°è®¡ç®—)

pythonå­—å…¸æºç (https://github.com/python/cpython/blob/master/Objects/dictobject.c, https://github.com/python/cpython/blob/master/Include/dictobject.h)
å‚è€ƒ: https://blog.csdn.net/lucky404/article/details/79606089
https://zh.wikipedia.org/wiki/%E5%93%88%E5%B8%8C%E8%A1%A8
https://coolcao.com/2019/07/17/hashmap/

#### + ä¸ join çš„åŒºåˆ«
å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œå½“ç”¨æ“ä½œç¬¦+è¿æ¥å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œæ¯æ‰§è¡Œä¸€æ¬¡+éƒ½ä¼šç”³è¯·ä¸€å—æ–°çš„å†…å­˜ï¼Œç„¶åå¤åˆ¶ä¸Šä¸€ä¸ª+æ“ä½œçš„ç»“æœå’Œæœ¬æ¬¡æ“ä½œçš„å³æ“ä½œç¬¦åˆ°è¿™å—å†…å­˜ç©ºé—´ï¼Œå› æ­¤ç”¨+è¿æ¥å­—ç¬¦ä¸²çš„æ—¶å€™ä¼šæ¶‰åŠå¥½å‡ æ¬¡å†…å­˜ç”³è¯·å’Œå¤åˆ¶ã€‚è€Œjoinåœ¨è¿æ¥å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œä¼šå…ˆè®¡ç®—éœ€è¦å¤šå¤§çš„å†…å­˜å­˜æ”¾ç»“æœï¼Œç„¶åä¸€æ¬¡æ€§ç”³è¯·æ‰€éœ€å†…å­˜å¹¶å°†å­—ç¬¦ä¸²å¤åˆ¶è¿‡å»ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆjoinçš„æ€§èƒ½ä¼˜äº+çš„åŸå› ã€‚æ‰€ä»¥åœ¨è¿æ¥å­—ç¬¦ä¸²æ•°ç»„çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è€ƒè™‘ä¼˜å…ˆä½¿ç”¨joinã€‚
#### is ä¸ == åŒºåˆ«
- is åˆ¤æ–­idæ˜¯å¦ç›¸ç­‰
- == åˆ¤æ–­å€¼æ˜¯å¦ç›¸ç­‰
> 1 is 1.0ã€€False
> 1 == 1.0ã€€True

#### type, isinstance åŒºåˆ«
isinstanceæ‰èƒ½ç”¨äºå«ç»§æ‰¿å…³ç³»çš„åˆ¤æ–­
```
class A:
    pass
class B(A):
    pass
isinstance(A(), A)    # returns True
type(A()) == A        # returns True
isinstance(B(), A)    # returns True
type(B()) == A        # returns False
```

TODO: python çŸ¥è¯†ç‚¹ http://vissssa.gitee.io/blog/posts/e11f968c/
#### å•ä¾‹æ¨¡å¼
å¥½å¤„: å¯¹äºé¢‘ç¹ä½¿ç”¨çš„å¯¹è±¡ï¼Œå¯ä»¥çœç•¥åˆ›å»ºå¯¹è±¡æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œè¿™å¯¹äºé‚£äº›é‡é‡çº§å¯¹è±¡è€Œè¨€ï¼Œæ˜¯éå¸¸å¯è§‚çš„ä¸€ç¬”ç³»ç»Ÿå¼€é”€ï¼›ç”±äº new æ“ä½œçš„æ¬¡æ•°å‡å°‘ï¼Œå› è€Œå¯¹ç³»ç»Ÿå†…å­˜çš„ä½¿ç”¨é¢‘ç‡ä¹Ÿä¼šé™ä½ï¼Œè¿™å°†å‡è½» GC å‹åŠ›ï¼Œç¼©çŸ­ GC åœé¡¿æ—¶é—´ã€‚

å•ä¾‹æ¨¡å¼ä¿è¯äº†åœ¨ç¨‹åºè¿è¡Œä¸­è¯¥ç±»åªå®ä¾‹åŒ–ä¸€æ¬¡ï¼Œå¹¶ä¸”æä¾›äº†ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ã€‚
`__new__()`æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•,ä¼šè¿”å›ä¸€ä¸ªåˆ›å»ºçš„å®ä¾‹,åœ¨`__init__()`ä¹‹å‰è¢«è°ƒç”¨ï¼Œç”¨äºç”Ÿæˆå®ä¾‹å¯¹è±¡ã€‚åˆ©ç”¨è¿™ä¸ªæ–¹æ³•å’Œç±»çš„å±æ€§çš„ç‰¹ç‚¹å¯ä»¥å®ç°è®¾è®¡æ¨¡å¼çš„å•ä¾‹æ¨¡å¼ã€‚
çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼.
å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œç”±äºå•ä¾‹æ¨¡å¼æ€»æ˜¯ä¼šå»åˆ¤æ–­ å®ä¾‹æ˜¯å¦è¢«åˆ›å»ºï¼Œä½†æ˜¯å¤šä¸ªçº¿ç¨‹æœ‰å¯èƒ½ä¼šæ‹¿åˆ°ç›¸åŒçš„ç»“æœï¼Œè¿™æ ·å°±æ— æ³•å®ç°å•ä¾‹æ¨¡å¼äº†ï¼Œå› æ­¤é‡åˆ°å¤šçº¿ç¨‹çš„ç¯å¢ƒæ—¶ï¼Œéœ€è¦åŠ é”ã€‚åŠ äº†é”ä¹‹åï¼Œæ¯ä¸ªçº¿ç¨‹åˆ¤æ–­ if cls.instance is None è¿™é‡Œå°±å˜æˆäº†çº¿ç¨‹å®‰å…¨ã€‚å› æ­¤å¯ä»¥å®ç°å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå§‹ç»ˆåªæœ‰ä¸€ä¸ªå®ä¾‹.
```python
import threading
def synchronized(func):
    func.__lock__ = threading.Lock()
    def lock_func(*args, **kwargs):
        with func.__lock__:
            return func(*args, **kwargs)
    return lock_func

class Singleton(object):
    instance = None
    @synchronized
    def __new__(cls, *args, **kwargs):
        if cls.instance is None:
            cls.instance = super().__new__(cls)
        return cls.instance

if __name__ == "__main__":
    a = Singleton(3)
    print("aå•ä¾‹! idä¸º %s" % id(a))
    b = Singleton(4)
    print("bå•ä¾‹! idä¸º %s" % id(b))
```

1 ä½¿ç”¨`__new__`æ–¹æ³•
```python
class Singleton(object):
    def __new__(cls, *args, **kw):
        if not hasattr(cls, '_instance'):
            orig = super(Singleton, cls)
            cls._instance = orig.__new__(cls, *args, **kw)
        return cls._instance

class MyClass(Singleton):
    a = 1
```
2 è£…é¥°å™¨ç‰ˆæœ¬
```python
def singleton(cls):
    instances = {}
    def getinstance(*args, **kw):
        if cls not in instances:
            instances[cls] = cls(*args, **kw)
        return instances[cls]
    return getinstance

@singleton
class MyClass:
  ...
```
3 importæ–¹æ³•
```python
# mysingleton.py
class My_Singleton(object):
    def foo(self):
        pass
my_singleton = My_Singleton()

# to use
from mysingleton import my_singleton
my_singleton.foo()
```

#### é™æ€æ–¹æ³•(staticmethod),ç±»æ–¹æ³•(classmethod),å®ä¾‹æ–¹æ³•,æ™®é€šæ–¹æ³•
```python
def foo(x):
    print "executing foo(%s)"%(x)

class A(object):
    def foo(self,x):
        print "executing foo(%s,%s)"%(self,x)

    @classmethod
    def class_foo(cls,x):
        print "executing class_foo(%s,%s)"%(cls,x)

    @staticmethod
    def static_foo(x):
        print "executing static_foo(%s)"%x
```
selfå’Œclsæ˜¯å¯¹ç±»æˆ–è€…å®ä¾‹çš„ç»‘å®š,å¯¹äºä¸€èˆ¬çš„å‡½æ•°æ¥è¯´æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆè°ƒç”¨foo(x),è¿™ä¸ªå‡½æ•°å°±æ˜¯æœ€å¸¸ç”¨çš„,å®ƒçš„å·¥ä½œè·Ÿä»»ä½•ä¸œè¥¿(ç±»,å®ä¾‹)æ— å…³.å¯¹äºå®ä¾‹æ–¹æ³•,æˆ‘ä»¬çŸ¥é“åœ¨ç±»é‡Œæ¯æ¬¡å®šä¹‰æ–¹æ³•çš„æ—¶å€™éƒ½éœ€è¦ç»‘å®šè¿™ä¸ªå®ä¾‹,å°±æ˜¯foo(self, x),ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢?å› ä¸ºå®ä¾‹æ–¹æ³•çš„è°ƒç”¨ç¦»ä¸å¼€å®ä¾‹,æˆ‘ä»¬éœ€è¦æŠŠå®ä¾‹è‡ªå·±ä¼ ç»™å‡½æ•°,è°ƒç”¨çš„æ—¶å€™æ˜¯è¿™æ ·çš„a.foo(x)(å…¶å®æ˜¯foo(a, x)).ç±»æ–¹æ³•ä¸€æ ·,åªä¸è¿‡å®ƒä¼ é€’çš„æ˜¯ç±»è€Œä¸æ˜¯å®ä¾‹,A.class_foo(x)

#### ç±»å˜é‡,å®ä¾‹å˜é‡
ç±»å˜é‡ï¼šæ˜¯å¯åœ¨ç±»çš„æ‰€æœ‰å®ä¾‹ä¹‹é—´å…±äº«çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬ä¸æ˜¯å•ç‹¬åˆ†é…ç»™æ¯ä¸ªå®ä¾‹çš„ï¼‰
å®ä¾‹å˜é‡ï¼šå®ä¾‹åŒ–ä¹‹åï¼Œæ¯ä¸ªå®ä¾‹å•ç‹¬æ‹¥æœ‰çš„å˜é‡ã€‚
```python
class Test(object):
    num_of_instance = 0
    def __init__(self, name):
        self.name = name
        Test.num_of_instance += 1

if __name__ == '__main__':
    print Test.num_of_instance   # 0
    t1 = Test('jack')
    print Test.num_of_instance   # 1
```

#### Pythonä¸­å•ä¸‹åˆ’çº¿å’ŒåŒä¸‹åˆ’çº¿
```python
>>> class MyClass():
...     def __init__(self):
...         self.__superprivate = "Hello"
...         self._semiprivate = ", world!"
...
>>> mc = MyClass()
>>> print mc.__superprivate
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: myClass instance has no attribute '__superprivate'
>>> print mc._semiprivate
, world!
>>> print mc.__dict__
{'_MyClass__superprivate': 'Hello', '_semiprivate': ', world!'}
```

#### Pythonä¸­çš„ä½œç”¨åŸŸ
æœ¬åœ°ä½œç”¨åŸŸï¼ˆLocalï¼‰â†’å½“å‰ä½œç”¨åŸŸè¢«åµŒå…¥çš„æœ¬åœ°ä½œç”¨åŸŸï¼ˆEnclosing localsï¼‰â†’å…¨å±€/æ¨¡å—ä½œç”¨åŸŸï¼ˆGlobalï¼‰â†’å†…ç½®ä½œç”¨åŸŸï¼ˆBuilt-inï¼‰


#### é¢å‘å¯¹è±¡
ç»§æ‰¿å¯ä»¥æŠŠçˆ¶ç±»çš„æ‰€æœ‰åŠŸèƒ½éƒ½ç›´æ¥æ‹¿è¿‡æ¥ï¼Œè¿™æ ·å°±ä¸å¿…é‡é›¶åšèµ·ï¼Œå­ç±»åªéœ€è¦æ–°å¢è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æŠŠçˆ¶ç±»ä¸é€‚åˆçš„æ–¹æ³•è¦†ç›–é‡å†™ã€‚
å¯¹äºé™æ€è¯­è¨€ï¼ˆä¾‹å¦‚Javaï¼‰æ¥è¯´ï¼Œå¦‚æœéœ€è¦ä¼ å…¥Animalç±»å‹ï¼Œåˆ™ä¼ å…¥çš„å¯¹è±¡å¿…é¡»æ˜¯Animalç±»å‹æˆ–è€…å®ƒçš„å­ç±»ï¼Œå¦åˆ™ï¼Œå°†æ— æ³•è°ƒç”¨run()æ–¹æ³•ã€‚
å¯¹äºPythonè¿™æ ·çš„åŠ¨æ€è¯­è¨€æ¥è¯´ï¼Œåˆ™ä¸ä¸€å®šéœ€è¦ä¼ å…¥Animalç±»å‹ã€‚æˆ‘ä»¬åªéœ€è¦ä¿è¯ä¼ å…¥çš„å¯¹è±¡æœ‰ä¸€ä¸ªrun()æ–¹æ³•å°±å¯ä»¥äº†ï¼š

#### python è§£é‡Šå™¨åŸç†
Pythonæ˜¯ä¸€ç§è§£é‡Šå‹è¯­è¨€ï¼Œå®ƒçš„æºä»£ç ä¸éœ€è¦ç¼–è¯‘ï¼Œå¯ä»¥ç›´æ¥ä»æºä»£ç è¿è¡Œç¨‹åºã€‚Pythonè§£é‡Šå™¨å°†æºä»£ç è½¬æ¢ä¸ºå­—èŠ‚ç ï¼Œç„¶åæŠŠç¼–è¯‘å¥½çš„å­—èŠ‚ç è½¬å‘åˆ°Pythonè™šæ‹Ÿæœºï¼ˆPython Virtual Machineï¼ŒPVMï¼‰ä¸­æ‰§è¡Œã€‚
å½“æˆ‘ä»¬æ‰§è¡ŒPythonä»£ç çš„æ—¶å€™ï¼Œåœ¨Pythonè§£é‡Šå™¨ç”¨å››ä¸ªè¿‡ç¨‹â€œæ‹†è§£â€æˆ‘ä»¬çš„ä»£ç ï¼š
1. è¯æ³•åˆ†æï¼Œå¦‚æœä½ é”®å…¥å…³é”®å­—æˆ–è€…å½“è¾“å…¥å…³é”®å­—æœ‰è¯¯æ—¶ï¼Œéƒ½ä¼šè¢«è¯æ³•åˆ†ææ‰€è§¦å‘ï¼Œä¸æ­£ç¡®çš„ä»£ç å°†ä¸ä¼šè¢«æ‰§è¡Œã€‚
2. è¯­æ³•åˆ†æï¼Œä¾‹å¦‚å½“"for i in test:"ä¸­ï¼Œteståé¢çš„å†’å·å¦‚æœè¢«å†™ä¸ºå…¶ä»–ç¬¦å·ï¼Œä»£ç ä¾æ—§ä¸ä¼šè¢«æ‰§è¡Œã€‚
3. ç”Ÿæˆ.pycå­—èŠ‚ç æ–‡ä»¶ã€‚
4. å°†ç¼–è¯‘å¥½çš„å­—èŠ‚ç è½¬å‘Pythonè™šæ‹Ÿæœºä¸­è¿›è¡Œæ‰§è¡Œï¼šç”±PVMæ¥æ‰§è¡Œè¿™äº›ç¼–è¯‘å¥½çš„å­—èŠ‚ç ã€‚

å­—èŠ‚ç bytecodeçš„å¥½å¤„å°±æ˜¯åŠ è½½å¿«ï¼Œè€Œä¸”å¯ä»¥è·¨å¹³å°ï¼ŒåŒæ ·ä¸€ä»½bytecodeï¼Œåªè¦æœ‰æ“ä½œç³»ç»Ÿå¹³å°ä¸Šæœ‰ç›¸åº”çš„Pythonè§£é‡Šå™¨ï¼Œå°±å¯ä»¥æ‰§è¡Œï¼Œè€Œä¸éœ€è¦æºä»£ç ã€‚ä¸åŒç‰ˆæœ¬çš„Pythonç¼–è¯‘çš„å­—èŠ‚ç æ˜¯ä¸å…¼å®¹çš„.ä¸€èˆ¬æ¥è¯´ä¸€ä¸ªPythonè¯­å¥ä¼šå¯¹åº”è‹¥å¹²å­—èŠ‚ç æŒ‡ä»¤ï¼ŒPythonçš„å­—èŠ‚ç æ˜¯ä¸€ç§ç±»ä¼¼æ±‡ç¼–æŒ‡ä»¤çš„ä¸­é—´è¯­è¨€ï¼Œä½†æ˜¯ä¸€ä¸ªå­—èŠ‚ç æŒ‡ä»¤å¹¶ä¸æ˜¯å¯¹åº”ä¸€ä¸ªæœºå™¨æŒ‡ä»¤ï¼ˆäºŒè¿›åˆ¶æŒ‡ä»¤ï¼‰ï¼Œè€Œæ˜¯å¯¹åº”ä¸€æ®µCä»£ç . ä¸€ä¸ªPythonçš„ç¨‹åºä¼šæœ‰è‹¥å¹²ä»£ç å—ç»„æˆï¼Œä¾‹å¦‚ä¸€ä¸ªPythonæ–‡ä»¶ä¼šæ˜¯ä¸€ä¸ªä»£ç å—ï¼Œä¸€ä¸ªç±»ï¼Œä¸€ä¸ªå‡½æ•°éƒ½æ˜¯ä¸€ä¸ªä»£ç å—ï¼Œä¸€ä¸ªä»£ç å—ä¼šå¯¹åº”ä¸€ä¸ªè¿è¡Œçš„ä¸Šä¸‹æ–‡ç¯å¢ƒä»¥åŠä¸€ç³»åˆ—çš„å­—èŠ‚ç æŒ‡ä»¤ã€‚

å‚è€ƒ https://www.ituring.com.cn/article/507878

#### MVC

- æ¨¡å‹ï¼ˆModelï¼‰ - ç¨‹åºå‘˜ç¼–å†™ç¨‹åºåº”æœ‰çš„åŠŸèƒ½ï¼ˆå®ç°ç®—æ³•ç­‰ç­‰ï¼‰ã€æ•°æ®åº“ä¸“å®¶è¿›è¡Œæ•°æ®ç®¡ç†å’Œæ•°æ®åº“è®¾è®¡(å¯ä»¥å®ç°å…·ä½“çš„åŠŸèƒ½)ã€‚
- è§†å›¾ï¼ˆViewï¼‰ - ç•Œé¢è®¾è®¡äººå‘˜è¿›è¡Œå›¾å½¢ç•Œé¢è®¾è®¡ã€‚
- æ§åˆ¶å™¨ï¼ˆControllerï¼‰- è´Ÿè´£è½¬å‘è¯·æ±‚ï¼Œå¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚


## æ·±åº¦å­¦ä¹ 

å¾…æ•´ç†:
https://www.nowcoder.com/discuss/128148?type=post&order=jing&pos=&page=3&channel=1004&source_id=search_post
https://blog.csdn.net/liuxiao214/article/details/83043170

### dirtnet
#### gmm, æ˜¾è‘—æ€§æ£€æµ‹
### TODO: å¾…æ•´ç†
http://www.fenghz.xyz/telephone-meeting/

## æ·±åº¦å­¦ä¹ 
#### CNNåˆ†ç±»ç½‘ç»œæ¼”å˜è„‰ç»œ
##### LeNet-5
LeNet è¢«è§†ä¸ºCNNçš„å¼€å±±ä¹‹ä½œï¼Œ1998ï¼Œå®šä¹‰äº†åŸºæœ¬ç»„ä»¶ï¼šå·ç§¯ã€æ± åŒ–ã€å…¨è¿æ¥ã€‚ç”¨äºæ‰‹å†™æ•°å­—è¯†åˆ«10åˆ†ç±»é—®é¢˜ï¼Œä¸»è¦æœ‰5å±‚ï¼ŒåŒ…æ‹¬ï¼šä¸¤å±‚ 5x5 å·ç§¯å±‚å’Œä¸‰å±‚å…¨è¿æ¥å±‚ã€‚
##### alexnet
2012å¹´
![alexnet](assets/20200524_184115_87.png)
- AlexNetä¸€å…±åŒ…å«8å±‚ï¼Œå‰5å±‚ç”±å·ç§¯å±‚ç»„æˆï¼Œè€Œå‰©ä¸‹çš„3å±‚ä¸ºå…¨è¿æ¥å±‚ã€‚
- ç½‘ç»œç»“æ„åˆ†ä¸ºåŒæ ·çš„ä¸Šä¸‹ä¸¤å±‚ï¼Œåˆ†åˆ«å¯¹åº”ä¸¤ä¸ªGPUçš„æ“ä½œè¿‡ç¨‹.
å·ç§¯æ ¸å¤§å° 11x11 -> 5x5 -> 3x3,ã€€åæ¥å…¨è¿æ¥å±‚

##### vgg16
2014å¹´
![vgg16](assets/20200524_184332_13.png)
- æ•´ä¸ªç½‘ç»œéƒ½ä½¿ç”¨äº†åŒæ ·å¤§å°çš„å·ç§¯æ ¸å°ºå¯¸3x3
- ä½¿ç”¨3x3çš„å·ç§¯ç»„åˆä»£æ›¿å¤§å°ºå¯¸çš„å·ç§¯ï¼ˆ2ä¸ª3x3å·ç§¯å³å¯ä¸5x5å·ç§¯æ‹¥æœ‰ç›¸åŒçš„æ„Ÿå—è§†é‡, 3ä¸ª3x3çš„å·ç§¯å±‚ä¸²è”çš„æ•ˆæœåˆ™ç›¸å½“äº1ä¸ª7x7çš„å·ç§¯å±‚ã€‚è¿™æ ·çš„è¿æ¥æ–¹å¼ä½¿å¾—1.ç½‘ç»œå‚æ•°é‡æ›´å°ï¼Œ2.å¤šå±‚æ¿€æ´»å‡½æ•°ä»¤ç½‘ç»œå¯¹ç‰¹å¾çš„å­¦ä¹ èƒ½åŠ›æ›´å¼ºã€‚
- VGG ä¸­è¿˜æ²¡æœ‰BN

ç†è®ºæ„Ÿå—é‡è®¡ç®—:
```python
RF = 1
for layer in ï¼ˆtop layer To down layerï¼‰: ã€€ã€€ã€€ã€€
    RF = ((RF - 1)* stride) + k
```

##### resnet
å‚è€ƒ: https://zhuanlan.zhihu.com/p/42833949
https://www.zhihu.com/question/64494691/answer/786270699
ç½‘ç»œç»“æ„:
ä¸€æ¬¡å±‚æ˜¯ 7x7 æ­¥é•¿ 2 çš„ å·ç§¯ä¸‹é‡‡æ ·, 3*3 MaxPool æ­¥é•¿ä¸º2
1. building block: è·³è·ƒè¿æ¥
2. Bottleneck: å…ˆå‹ç¼©å†è†¨èƒ€

è§£å†³çš„é—®é¢˜
1. æ¢¯åº¦æ¶ˆå¤±
åå‘ä¼ æ’­è¿‡ç¨‹,ä¸€æ—¦å…¶ä¸­æŸä¸€ä¸ªå¯¼æ•°å¾ˆå°ï¼Œå¤šæ¬¡è¿ä¹˜åæ¢¯åº¦å¯èƒ½è¶Šæ¥è¶Šå°ï¼Œå¯¹äºæ·±å±‚ç½‘ç»œï¼Œä¼ åˆ°æµ…å±‚å‡ ä¹å°±æ²¡äº†ã€‚ä½†æ˜¯å¦‚æœä½¿ç”¨äº†æ®‹å·®ï¼Œæ¯ä¸€ä¸ªå¯¼æ•°å°±åŠ ä¸Šäº†ä¸€ä¸ªæ’ç­‰é¡¹1ï¼Œdh/dx=d(f+x)/dx=1+df/dxã€‚æ­¤æ—¶å°±ç®—åŸæ¥çš„å¯¼æ•°df/dxå¾ˆå°ï¼Œè¿™æ—¶å€™è¯¯å·®ä»ç„¶èƒ½å¤Ÿæœ‰æ•ˆçš„åå‘ä¼ æ’­ã€‚
2. ç½‘ç»œé€€åŒ–
ç½‘ç»œé€€åŒ–: è™½ç„¶æ˜¯ä¸€ä¸ªé«˜ç»´çš„çŸ©é˜µï¼Œä½†æ˜¯å¤§éƒ¨åˆ†ç»´åº¦å´æ²¡æœ‰ä¿¡æ¯ï¼Œè¡¨è¾¾èƒ½åŠ›æ²¡æœ‰çœ‹èµ·æ¥é‚£ä¹ˆå¼ºå¤§ã€‚
è®©æ¨¡å‹çš„å†…éƒ¨ç»“æ„è‡³å°‘æœ‰æ’ç­‰æ˜ å°„çš„èƒ½åŠ›ã€‚ä»¥ä¿è¯åœ¨å †å ç½‘ç»œçš„è¿‡ç¨‹ä¸­ï¼Œç½‘ç»œè‡³å°‘ä¸ä¼šå› ä¸ºç»§ç»­å †å è€Œäº§ç”Ÿé€€åŒ–. å‡è®¾æƒé‡çŸ©é˜µå®Œå…¨é€€åŒ–ä¸º0ï¼Œåˆ™è¾“å‡ºå·²ç»å¤±å»é‰´åˆ«èƒ½åŠ›ï¼Œæ­¤æ—¶åŠ ä¸Šæ®‹å·®è¿æ¥ï¼Œç½‘ç»œåˆæ¢å¤äº†è¡¨è¾¾èƒ½åŠ›ã€‚

##### SENet
å¼•å…¥äº†attentionæœºåˆ¶,å¯¹æ¯ä¸ªchannelè®­ç»ƒå¾—åˆ°ä¸€ä¸ªæƒé‡ç³»æ•°

##### darknet53
ç½‘ç»œç»“æ„:

##### dla32
ç½‘ç»œç»“æ„:

##### mobilenetv2
ç½‘ç»œç»“æ„:
ä¸€æ¬¡å±‚æ˜¯ 3x3 æ­¥é•¿ 2 çš„ å·ç§¯ä¸‹é‡‡æ ·
InvertedResidual: å…ˆå°†é€šé“è†¨èƒ€6å€,å†å‹ç¼©
![20200526_002738_29](assets/20200526_002738_29.png)

è§£å†³çš„é—®é¢˜:
å’Œ MobileNetV1 çš„åŒºåˆ«:

![20200602_004943_92](assets/20200602_004943_92.png)

##### inceptionç³»åˆ—
inception v1, æ±‡åˆ1x1,3x3,5x5,maxpool,æ±‡åˆå‰1x1å‡å°‘é€šé“æ•°
![20200626_172303_71](assets/20200626_172303_71.png)
inceptionç³»åˆ—è´¡çŒ®:
1. æå‡ºäº†Global Average Pooling
2. 1x1 å·ç§¯, æ·±åº¦å¯åˆ†ç¦»å·ç§¯
3. label smoothing


#### ç›®æ ‡æ£€æµ‹ç½‘ç»œä¸å¼‚åŒç‚¹

#### ä»€ä¹ˆæ˜¯æ¢¯åº¦çˆ†ç‚¸ï¼Œä»€ä¹ˆæ˜¯æ¢¯åº¦æ¶ˆå¤±ï¼Œç¥ç»ç½‘ç»œæ˜¯æ€ä¹ˆè§£å†³æ¢¯åº¦çˆ†ç‚¸é—®é¢˜çš„ï¼ŒResNetä¸ºä»€ä¹ˆèƒ½å¤Ÿè§£å†³æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Ÿ

#### è¿‡æ‹Ÿåˆå¦‚ä½•ç¼“è§£ï¼Ÿ

#### NVIDIA INT8é‡åŒ–æµç¨‹

![](assets/markdown-img-paste-20200821105850353.png)

#### å…¨è¿æ¥å±‚ä½œç”¨
1. å°†å­¦åˆ°çš„â€œç‰¹å¾è¡¨ç¤ºâ€æ˜ å°„åˆ°æ ·æœ¬æ ‡è®°ç©ºé—´
2. FCå¯åœ¨æ¨¡å‹è¡¨ç¤ºèƒ½åŠ›è¿ç§»è¿‡ç¨‹ä¸­å……å½“â€œé˜²ç«å¢™â€

#### Poolingå±‚çš„ä½œç”¨ä»¥åŠå¦‚ä½•è¿›è¡Œåå‘ä¼ æ’­
poolingå±‚ä½œç”¨
1ã€å¢åŠ éçº¿æ€§,ä¹Ÿèµ·åˆ°æ³¨æ„åŠ›æœºåˆ¶çš„ä½œç”¨
2ã€ä¿ç•™ä¸»è¦çš„ç‰¹å¾åŒæ—¶å‡å°‘è®¡ç®—é‡(poolingå±‚æ— å‚æ•°)ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆï¼Œæé«˜æ¨¡å‹æ³›åŒ–èƒ½åŠ›
3ã€invariance(ä¸å˜æ€§)ï¼Œè¿™ç§ä¸å˜æ€§åŒ…æ‹¬translation(å¹³ç§»)ï¼Œrotation(æ—‹è½¬)ï¼Œscale(å°ºåº¦)

1. average pooling æŠŠå½“å‰æ¢¯åº¦å¹³å‡åˆ†æˆ n ä»½åˆ†é…ç»™ä¸Šä¸€å±‚
2. max pooling å°†å½“å‰æ¢¯åº¦ç›´æ¥ä¼ é€’ç»™å‰ä¸€å±‚çš„æŸä¸ªåƒç´ , æ‰€ä»¥ï¼Œmax poolingå’Œaverage poolingä¸åŒçš„æ˜¯ï¼Œmax poolingåœ¨å‰å‘ä¼ æ’­çš„æ—¶å€™è¦è®°å½•æ± åŒ–æ“ä½œæ—¶å“ªä¸ªåƒç´ çš„å€¼æ˜¯æœ€å¤§çš„ï¼Œå³max_idï¼Œåœ¨åå‘ä¼ æ’­ä¸­æ‰èƒ½å°†å…¶å¯¹åº”èµ·æ¥ã€‚

Spatial Pyramid Poolingï¼ˆç©ºé—´é‡‘å­—å¡”æ± åŒ–ï¼‰
ç”¨å¤§å°ä¸åŒçš„æ± åŒ–çª—å£æ¥ä½œç”¨äºfeature mapï¼Œå¾—åˆ°1Ã—1ã€2Ã—2å’Œ4Ã—4çš„æ± åŒ–ç»“æœ

#### ç¥ç»ç½‘ç»œåå‘æ±‚å¯¼ä¸å¯å¯¼æƒ…å†µå¤„ç†
1. æ¿€æ´»å‡½æ•°ä¸å¯å¯¼
ä»¥reluå‡½æ•°ä¸ºä¾‹ï¼Œå½“x>0æ—¶ï¼Œå¯¼æ•°ä¸º1ï¼Œå½“x<0æ—¶å¯¼æ•°ä¸º0,å½“x=0çš„æ¬¡æ¢¯åº¦câˆˆ[0,1]ï¼Œcå¯ä»¥å–[0,1]ä¹‹é—´çš„ä»»æ„å€¼,ä¸€èˆ¬ç›´æ¥å–0ã€‚
2. å¹³å‡æ± åŒ–
åå‘ä¼ æ’­çš„è¿‡ç¨‹ä¹Ÿå°±æ˜¯æŠŠæŸä¸ªå…ƒç´ çš„æ¢¯åº¦ç­‰åˆ†ä¸ºnä»½åˆ†é…ç»™å‰ä¸€å±‚ï¼Œä¿è¯æ± åŒ–å‰åçš„æ¢¯åº¦ä¹‹å’Œä¿æŒä¸å˜
3. maxæ± åŒ–
åå‘ä¼ æ’­ä¹Ÿå°±æ˜¯æŠŠæ¢¯åº¦ç›´æ¥ä¼ ç»™å‰ä¸€å±‚æŸä¸€ä¸ªåƒç´ ï¼Œè€Œå…¶ä»–åƒç´ ä¸æ¥å—æ¢¯åº¦

#### ROI Pooling
è¾“å…¥ä¸ºregion proposals å’Œ ç‰¹å¾æå–çš„ feature mapã€‚å°†region proposal æ˜ å°„åˆ°feature mapä¸Šï¼Œç„¶åå¯¹æ¯ä¸ªregion proposalåˆ†æˆ7 * 7çš„æ–¹æ ¼ï¼Œåšmax poolingï¼Œä»è€Œè¾“å‡ºä¸ºå¤§å°ç›¸ç­‰çš„7*7çš„proposal feature mapsã€‚roi poolingçš„ä½œç”¨æ˜¯ä¸å›ºå®šè¾“å…¥çš„å°ºå¯¸ï¼Œè¾“å‡ºç›¸åŒå°ºå¯¸ï¼Œä»è€Œèƒ½å¤Ÿè¿›å…¥å…¨è¿æ¥å±‚ã€‚
#### ROI Align
è§£å†³ROI Poolingä¸­çš„ä¸¤æ¬¡é‡åŒ–ï¼Œç¬¬ä¸€æ¬¡æ˜¯å°†åŸå›¾çš„å€™é€‰æ¡†æ˜ å°„åˆ°ç‰¹å¾å›¾ä¸Šæ—¶ï¼Œä¼šé™¤ä»¥32ï¼Œå¾—åˆ°ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œæ­¤æ—¶ä¼šè¿›è¡Œå–æ•´æ“ä½œã€‚ç¬¬äºŒæ¬¡æ˜¯åœ¨poolingæ—¶ï¼Œå°†ç‰¹å¾å›¾æ˜ å°„ä¸º7*7çš„å¤§å°ï¼Œæ­¤æ—¶ä¹Ÿæ˜¯é™¤ä¸å°½çš„ï¼Œè¦è¿›è¡Œå–æ•´æ“ä½œã€‚å°±ä¼šå¯¹è¾¹æ¡†ä½ç½®äº§ç”Ÿå½±å“ã€‚
ROI Aligné€šè¿‡å¯¹æµ®ç‚¹æ•°çš„ä½ç½®è¿›è¡ŒåŒçº¿æ€§æ’å€¼ï¼Œå¾—åˆ°è¿™ä¸ªç‚¹çš„å€¼ã€‚å¯¹äºpoolingä¸­çš„æ¯ä¸ªæ ¼å­ï¼Œå–å›ºå®šçš„4ä¸ªç‚¹è¿›è¡ŒåŒçº¿æ€§æ’å€¼ï¼Œç„¶åå–maxpoolingï¼Œä½œä¸ºè¿™ä¸ªæ ¼å­çš„è¾“å‡ºã€‚

#### rpnçš„loss
åˆ†ç±»çš„lossä¸ºäº¤å‰ç†µcross_entroy,å›å½’çš„lossä¸ºsmooth L1 loss.
Smooth L1å®Œç¾åœ°é¿å¼€äº† L1 å’Œ L2 æŸå¤±çš„ç¼ºé™·ï¼Œåœ¨ æŸå¤± è¾ƒå°æ—¶ï¼Œå¯¹ å…¶æ¢¯åº¦ä¹Ÿä¼šå˜å°ï¼Œä½¿å¾—èƒ½å¤Ÿæ›´å¥½çš„è¿›è¡Œæ”¶æ•›; è€Œåœ¨æŸå¤±å¾ˆå¤§æ—¶ï¼Œå¯¹ x çš„æ¢¯åº¦çš„ç»å¯¹å€¼è¾¾åˆ°ä¸Šé™1ï¼Œä¸ä¼šå› é¢„æµ‹å€¼çš„æ¢¯åº¦ååˆ†å¤§å¯¼è‡´è®­ç»ƒä¸ç¨³å®šã€‚L2å¯¹ç¦»ç¾¤ç‚¹ï¼Œå¼‚å¸¸å€¼æ›´æ•æ„Ÿï¼Œå®¹æ˜“å‘ç”Ÿæ¢¯åº¦çˆ†ç‚¸ã€‚

#### FasterRCNN è®­ç»ƒ4æ­¥éª¤
1. load pre-trained base network, train RPN top
2. load new pre-trained base network, train classifier top
3. fix the new pre-trained base network from (2), fine tune the RNP top
4. fix the new pre-trained base network from (2), fine tune the classifier top

#### CNNç»“æ„ç‰¹ç‚¹
å±€éƒ¨è¿æ¥ï¼Œæƒå€¼å…±äº«ï¼Œæ± åŒ–æ“ä½œï¼Œå¤šå±‚æ¬¡ç»“æ„ã€‚
å±€éƒ¨è¿æ¥ä½¿ç½‘ç»œå¯ä»¥æå–æ•°æ®çš„å±€éƒ¨ç‰¹å¾
æƒå€¼å…±äº«å¤§å¤§é™ä½äº†ç½‘ç»œçš„è®­ç»ƒéš¾åº¦ï¼Œä¸€ä¸ªFilteråªæå–ä¸€ä¸ªç‰¹å¾ï¼Œåœ¨æ•´ä¸ªå›¾ç‰‡ï¼ˆæˆ–è€…è¯­éŸ³ï¼æ–‡æœ¬ï¼‰ ä¸­è¿›è¡Œå·ç§¯
æ± åŒ–æ“ä½œä¸å¤šå±‚æ¬¡ç»“æ„ä¸€èµ·ï¼Œå®ç°äº†æ•°æ®çš„é™ç»´ï¼Œå°†ä½å±‚æ¬¡çš„å±€éƒ¨ç‰¹å¾ç»„åˆæˆä¸ºè¾ƒé«˜å±‚æ¬¡çš„ç‰¹å¾ï¼Œä»è€Œå¯¹æ•´ä¸ªå›¾ç‰‡è¿›è¡Œè¡¨ç¤ºã€‚

#### è§£å†³æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸é—®é¢˜ï¼Œå¸¸ç”¨çš„æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹æ¡ˆï¼š
é¢„è®­ç»ƒæ¨¡å‹ + å¾®è°ƒ
æ¢¯åº¦å‰ªåˆ‡ + æ­£åˆ™åŒ–
reluã€leakreluã€reluç­‰æ¿€æ´»å‡½æ•°
BNæ‰¹å½’ä¸€åŒ–
CNNä¸­çš„æ®‹å·®ç»“æ„

#### 1x1å·ç§¯ä½œç”¨
1. æ”¹å˜é€šé“æ•°
2. èåˆé€šé“é—´ç‰¹å¾,ä»»æ„è¾“å…¥å½¢çŠ¶
3. åŠ å…¥éçº¿æ€§ã€‚å·ç§¯å±‚ä¹‹åç»è¿‡æ¿€åŠ±å±‚ï¼Œ1*1çš„å·ç§¯åœ¨å‰ä¸€å±‚çš„å­¦ä¹ è¡¨ç¤ºä¸Šæ·»åŠ äº†éçº¿æ€§æ¿€åŠ±ï¼ˆ non-linear activation ï¼‰ï¼Œæå‡ç½‘ç»œçš„è¡¨è¾¾èƒ½åŠ›ï¼›

#### æ··æ·†çŸ©é˜µï¼š
True Positive(çœŸæ­£ä¾‹, TP)ï¼šå°†æ­£ç±»é¢„æµ‹ä¸ºæ­£ç±»æ•°.
True Negative(çœŸè´Ÿä¾‹, TN)ï¼šå°†è´Ÿç±»é¢„æµ‹ä¸ºè´Ÿç±»æ•°.
False Positive(å‡æ­£ä¾‹, FP)ï¼šå°†è´Ÿç±»é¢„æµ‹ä¸ºæ­£ç±»æ•° â†’ è¯¯æŠ¥ (Type I error).
False Negative(å‡è´Ÿä¾‹å­, FN)ï¼šå°†æ­£ç±»é¢„æµ‹ä¸ºè´Ÿç±»æ•° â†’ æ¼æŠ¥ (Type II error).

#### mAPæŒ‡æ ‡è§£é‡Š
precision = TP / (TP+FP)
recall = TP / (TP+FN) = TP / (n_GT)
precision_curve = accumulate TP / (accumulate(TP+FP))
recall_curve = accumulate TP / n_GT
APè®¡ç®—: ç½®ä¿¡åº¦ä»å¤§åˆ°å°æ’åº, æ’å€¼precision_curve, recall_curve è®¡ç®—


#### å¸¸ç”¨æ•°æ®å¢å¼ºæ–¹æ³•
ä»¿å°„å˜åŒ–: æ—‹è½¬,ç¼©æ”¾,å¹³ç§»
å‰ªè£,ç¿»è½¬
æ·»åŠ å™ªå£°,æ»¤æ³¢(ä¸­å€¼,å‡å€¼,é«˜æ–¯)
äº®åº¦,å¯¹æ¯”åº¦å¢å¼º,é”åŒ–
æ·»åŠ å…‰æ–‘,é¢œè‰²æ‰°åŠ¨
GAN
mixup, cutout

#### ä»€ä¹ˆæ˜¯å‡¸ä¼˜åŒ–
æœ€å°äºŒä¹˜, çº¿æ€§è§„åˆ’ å‡å±äºå‡¸ä¼˜åŒ–é—®é¢˜

#### ç°åº¦ç›´æ–¹å›¾ä¸å‡åŒ€åŒ–
https://zhuanlan.zhihu.com/p/32857009
https://zhuanlan.zhihu.com/p/54771264

#### å›¾åƒç®—æ³•åŠ é€Ÿæ–¹æ³•
1. çŸ¥è¯†è’¸é¦
2. åŸºäºæŒ‡ä»¤é›†çš„ä¼˜åŒ–
3. ç²¾ç®€ç½‘ç»œç»“æ„(SSH, sconv)
4. å‰ªæ,é€šé“å‰ªè£
5. é‡åŒ–

#### BFLOAT16
ç”¨äºé‡åŒ–ï¼ŒåŒæ—¶å¯åœ¨è®­ç»ƒä¸é¢„æµ‹è¿‡ç¨‹ä¸­ä½¿ç”¨ã€‚BF16çš„æŒ‡æ•°ä½æ¯”FP16å¤šï¼Œè·ŸFP32ä¸€æ ·ï¼Œä¸è¿‡å°æ•°ä½æ¯”è¾ƒå°‘ã€‚å¸Œæœ›åœ¨16bitsçš„ç©ºé—´ä¸­ï¼Œé€šè¿‡é™ä½ç²¾åº¦ï¼ˆæ¯”FP16çš„ç²¾åº¦è¿˜ä½ï¼‰çš„æ–¹å¼ï¼Œæ¥è·å¾—æ›´å¤§çš„æ•°å€¼ç©ºé—´ï¼ˆDynamic Rangeï¼‰ã€‚

| Format | Bits | Exponent | Fraction |
| ------ | ---- | -------- | -------- |
| FP32   | 32   | 8        | 23       |
| FP16   | 16   | 5        | 10       |
| BF16   | 16   | 8        | 7        |

#### è‰²å½©ç©ºé—´
HSV(è‰²ç›¸, é¥±å’Œåº¦, æ˜åº¦), HSL(è‰²ç›¸, é¥±å’Œåº¦, äº®åº¦), LAB(äº®åº¦, ç»¿åˆ°çº¢, è“åˆ°é»„)

#### éœå¤«å˜æ¢
éœå¤«å˜æ¢(Hough Transform)å¯ä»¥ç†è§£ä¸ºå›¾åƒå¤„ç†ä¸­çš„ä¸€ç§ç‰¹å¾æå–æŠ€æœ¯ï¼Œé€šè¿‡æŠ•ç¥¨ç®—æ³•æ£€æµ‹å…·æœ‰ç‰¹å®šå½¢çŠ¶çš„ç‰©ä½“ã€‚éœå¤«å˜æ¢è¿ç”¨ä¸¤ä¸ªåæ ‡ç©ºé—´ä¹‹é—´çš„å˜æ¢å°†åœ¨ä¸€ä¸ªç©ºé—´ä¸­å…·æœ‰ç›¸åŒå½¢çŠ¶çš„æ›²çº¿æˆ–ç›´çº¿æ˜ å°„åˆ°å¦ä¸€ä¸ªåæ ‡ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹å½¢æˆå³°å€¼ï¼Œä»è€ŒæŠŠæ£€æµ‹ä»»æ„å½¢çŠ¶çš„é—®é¢˜è½¬åŒ–ä¸ºç»Ÿè®¡å³°å€¼é—®é¢˜ã€‚
å‚è€ƒ: https://github.com/GYee/CV_interviews_Q-A/blob/master/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/15_Hough%E5%8F%98%E6%8D%A2%E6%A3%80%E6%B5%8B%E7%9B%B4%E7%BA%BF%E4%B8%8E%E5%9C%86%E7%9A%84%E5%8E%9F%E7%90%86.md

#### HOG
å¾…æ•´ç†
https://github.com/GYee/CV_interviews_Q-A/blob/master/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/02_HOG%E7%AE%97%E6%B3%95%E5%8E%9F%E7%90%86.md

#### LBP
å¾…æ•´ç†
https://github.com/GYee/CV_interviews_Q-A/blob/master/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/01_LBP%E7%AE%97%E6%B3%95%E5%8E%9F%E7%90%86.md
